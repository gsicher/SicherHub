<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.1">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d6d6d; -webkit-text-stroke: #6d6d6d}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6b0001; -webkit-text-stroke: #6b0001}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #fb0007; -webkit-text-stroke: #fb0007}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #0000ff; -webkit-text-stroke: #0000ff}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; -webkit-text-stroke: #000000}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4d5055; -webkit-text-stroke: #4d5055}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; -webkit-text-stroke: #000000; min-height: 16.0px}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #18702b; -webkit-text-stroke: #18702b}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #093c94; -webkit-text-stroke: #093c94}
    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #18702b; -webkit-text-stroke: #18702b; min-height: 16.0px}
    span.s1 {font-kerning: none; background-color: #ecf1f7}
    span.s2 {font-kerning: none; color: #fb0007; background-color: #ecf1f7; -webkit-text-stroke: 0px #fb0007}
    span.s3 {font-kerning: none; color: #2a2a2a; background-color: #ecf1f7; -webkit-text-stroke: 0px #2a2a2a}
    span.s4 {font-kerning: none; color: #000000; background-color: #ecf1f7; -webkit-text-stroke: 0px #000000}
    span.s5 {font-kerning: none; color: #0000ff; background-color: #ecf1f7; -webkit-text-stroke: 0px #0000ff}
    span.s6 {font-kerning: none; color: #6b0001; background-color: #ecf1f7; -webkit-text-stroke: 0px #6b0001}
    span.s7 {font-kerning: none}
    span.s8 {font-kerning: none; color: #6f0ec3; background-color: #ecf1f7; -webkit-text-stroke: 0px #6f0ec3}
    span.s9 {font-kerning: none; color: #093c94; background-color: #ecf1f7; -webkit-text-stroke: 0px #093c94}
    span.s10 {font-kerning: none; color: #18702b; background-color: #ecf1f7; -webkit-text-stroke: 0px #18702b}
    span.s11 {font-kerning: none; color: #137646; background-color: #ecf1f7; -webkit-text-stroke: 0px #137646}
    span.s12 {font-kerning: none; color: #0e6e6d; background-color: #ecf1f7; -webkit-text-stroke: 0px #0e6e6d}
    span.s13 {font-kerning: none; color: #a4450b; background-color: #ecf1f7; -webkit-text-stroke: 0px #a4450b}
    span.s14 {font-kerning: none; color: #4d5055; background-color: #ecf1f7; -webkit-text-stroke: 0px #4d5055}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s1">html</span><span class="s4"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s5">"en"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">ย ย </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s5">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">ย ย </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s4"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย </span></span><span class="s3">&lt;</span><span class="s6">title</span><span class="s3">&gt;</span><span class="s1">Superhero Math Battle</span><span class="s3">&lt;/</span><span class="s6">title</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย </span></span><span class="s1">&lt;!-- Load Tailwind CSS --&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">ย ย </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย </span></span><span class="s1">&lt;!-- Configure Tailwind for custom colors and font --&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">ย ย </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">@import</span><span class="s4"> </span><span class="s9">url</span><span class="s4">(</span><span class="s1">'https://fonts.googleapis.com/css2?family=Inter:wght@100..900&amp;display=swap'</span><span class="s4">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s6">:root</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s2">font-family:</span><span class="s1"> </span><span class="s10">'Inter'</span><span class="s1">, </span><span class="s9">sans-serif</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s1">/* --- CSS Keyframe Definitions (Pure CSS Animations) --- */</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">@keyframes</span><span class="s1"> </span><span class="s9">shake</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s11">0%</span><span class="s1">, </span><span class="s11">100%</span><span class="s1"> { </span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">translateX(</span><span class="s11">0</span><span class="s9">)</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s11">25%</span><span class="s1"> { </span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">translateX(</span><span class="s11">-10px</span><span class="s9">)</span><span class="s1"> </span><span class="s9">rotate(</span><span class="s11">-5deg</span><span class="s9">)</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s11">75%</span><span class="s1"> { </span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">translateX(</span><span class="s11">10px</span><span class="s9">)</span><span class="s1"> </span><span class="s9">rotate(</span><span class="s11">5deg</span><span class="s9">)</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">@keyframes</span><span class="s1"> </span><span class="s9">explode</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s11">0%</span><span class="s1"> { </span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">scale(</span><span class="s11">0</span><span class="s9">)</span><span class="s1"> </span><span class="s9">rotate(</span><span class="s11">0deg</span><span class="s9">)</span><span class="s1">; </span><span class="s2">opacity:</span><span class="s1"> </span><span class="s11">1</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s11">50%</span><span class="s1"> { </span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">scale(</span><span class="s11">1.5</span><span class="s9">)</span><span class="s1"> </span><span class="s9">rotate(</span><span class="s11">180deg</span><span class="s9">)</span><span class="s1">; </span><span class="s2">opacity:</span><span class="s1"> </span><span class="s11">0.8</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s11">100%</span><span class="s1"> { </span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">scale(</span><span class="s11">3</span><span class="s9">)</span><span class="s1"> </span><span class="s9">rotate(</span><span class="s11">360deg</span><span class="s9">)</span><span class="s1">; </span><span class="s2">opacity:</span><span class="s1"> </span><span class="s11">0</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">@keyframes</span><span class="s1"> </span><span class="s9">pulse-glow</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s11">0%</span><span class="s1">, </span><span class="s11">100%</span><span class="s1"> { </span><span class="s2">box-shadow:</span><span class="s1"> </span><span class="s11">0</span><span class="s1"> </span><span class="s11">0</span><span class="s1"> </span><span class="s11">20px</span><span class="s1"> </span><span class="s9">rgba(</span><span class="s11">255</span><span class="s1">, </span><span class="s11">255</span><span class="s1">, </span><span class="s11">0</span><span class="s1">, </span><span class="s11">0.8</span><span class="s9">)</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s11">50%</span><span class="s1"> { </span><span class="s2">box-shadow:</span><span class="s1"> </span><span class="s11">0</span><span class="s1"> </span><span class="s11">0</span><span class="s1"> </span><span class="s11">40px</span><span class="s1"> </span><span class="s9">rgba(</span><span class="s11">255</span><span class="s1">, </span><span class="s11">255</span><span class="s1">, </span><span class="s11">0</span><span class="s1">, </span><span class="s11">1</span><span class="s9">)</span><span class="s1">, </span><span class="s11">0</span><span class="s1"> </span><span class="s11">0</span><span class="s1"> </span><span class="s11">60px</span><span class="s1"> </span><span class="s9">rgba(</span><span class="s11">255</span><span class="s1">, </span><span class="s11">255</span><span class="s1">, </span><span class="s11">0</span><span class="s1">, </span><span class="s11">0.6</span><span class="s9">)</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">@keyframes</span><span class="s1"> </span><span class="s9">slide-in</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s9">from</span><span class="s1"> { </span><span class="s2">opacity:</span><span class="s1"> </span><span class="s11">0</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s9">to</span><span class="s1"> { </span><span class="s2">opacity:</span><span class="s1"> </span><span class="s11">1</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">@keyframes</span><span class="s1"> </span><span class="s9">float</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s11">0%</span><span class="s1">, </span><span class="s11">100%</span><span class="s1"> { </span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">translateY(</span><span class="s11">0px</span><span class="s9">)</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s11">50%</span><span class="s1"> { </span><span class="s2">transform:</span><span class="s1"> </span><span class="s9">translateY(</span><span class="s11">-10px</span><span class="s9">)</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s6">.shake</span><span class="s1"> { </span><span class="s2">animation:</span><span class="s1"> </span><span class="s9">shake</span><span class="s1"> </span><span class="s11">0.5s</span><span class="s1">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s6">.explode</span><span class="s1"> { </span><span class="s2">animation:</span><span class="s1"> </span><span class="s9">explode</span><span class="s1"> </span><span class="s11">0.6s</span><span class="s1"> </span><span class="s9">ease-out</span><span class="s1">; }</span></p>
<p class="p9"><span class="s4"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s6">.pulse-glow</span><span class="s4"> { </span><span class="s2">animation:</span><span class="s4"> </span><span class="s1">pulse-glow</span><span class="s4"> </span><span class="s11">1s</span><span class="s4"> </span><span class="s1">infinite</span><span class="s4">; }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s6">.slide-in</span><span class="s1"> { </span><span class="s2">animation:</span><span class="s1"> </span><span class="s9">slide-in</span><span class="s1"> </span><span class="s11">0.5s</span><span class="s1">; }</span></p>
<p class="p9"><span class="s4"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s6">.float</span><span class="s4"> { </span><span class="s2">animation:</span><span class="s4"> </span><span class="s1">float</span><span class="s4"> </span><span class="s11">2s</span><span class="s4"> </span><span class="s1">ease-in-out</span><span class="s4"> </span><span class="s1">infinite</span><span class="s4">; }</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">ย ย </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s3">&lt;</span><span class="s6">body</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-gradient-to-b from-blue-900 via-purple-900 to-black min-h-screen p-4"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">ย ย </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"game-root"</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s1">&lt;!-- Game content will render here --&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย</span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย </span></span><span class="s1">&lt;!-- Animation Overlay for POW/MISS effects --&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">ย ย </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"animation-overlay"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"absolute inset-0 flex items-center justify-center z-20 pointer-events-none"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">ย ย </span></span><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s1">// --- DATA ---</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> heroes = [</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย </span>{ name: </span><span class="s1">'Batman'</span><span class="s4">, color: </span><span class="s1">'bg-gray-700'</span><span class="s4">, </span><span class="s12">IconText</span><span class="s4">: </span><span class="s1">'B'</span><span class="s4">, </span><span class="s12">IconClass</span><span class="s4">: </span><span class="s1">'text-white text-6xl font-black'</span><span class="s4">, power: </span><span class="s1">'Batarang'</span><span class="s4">, universe: </span><span class="s1">'DC'</span><span class="s4"> },</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย </span>{ name: </span><span class="s1">'Superman'</span><span class="s4">, color: </span><span class="s1">'bg-blue-600'</span><span class="s4">, </span><span class="s12">IconText</span><span class="s4">: </span><span class="s1">'S'</span><span class="s4">, </span><span class="s12">IconClass</span><span class="s4">: </span><span class="s1">'text-yellow-400 text-6xl font-black'</span><span class="s4">, power: </span><span class="s1">'Heat Vision'</span><span class="s4">, universe: </span><span class="s1">'DC'</span><span class="s4"> },</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย </span>{ name: </span><span class="s1">'The Flash'</span><span class="s4">, color: </span><span class="s1">'bg-red-600'</span><span class="s4">, </span><span class="s12">IconText</span><span class="s4">: </span><span class="s1">'F'</span><span class="s4">, </span><span class="s12">IconClass</span><span class="s4">: </span><span class="s1">'text-yellow-300 text-6xl font-black'</span><span class="s4">, power: </span><span class="s1">'Speed Punch'</span><span class="s4">, universe: </span><span class="s1">'DC'</span><span class="s4"> },</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย </span>{ name: </span><span class="s1">'Wonder Woman'</span><span class="s4">, color: </span><span class="s1">'bg-yellow-500'</span><span class="s4">, </span><span class="s12">IconText</span><span class="s4">: </span><span class="s1">'W'</span><span class="s4">, </span><span class="s12">IconClass</span><span class="s4">: </span><span class="s1">'text-red-700 text-6xl font-black'</span><span class="s4">, power: </span><span class="s1">'Lasso'</span><span class="s4">, universe: </span><span class="s1">'DC'</span><span class="s4"> },</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย </span>{ name: </span><span class="s1">'Spider-Man'</span><span class="s4">, color: </span><span class="s1">'bg-red-700'</span><span class="s4">, </span><span class="s12">IconText</span><span class="s4">: </span><span class="s1">'S'</span><span class="s4">, </span><span class="s12">IconClass</span><span class="s4">: </span><span class="s1">'text-blue-500 text-6xl font-black'</span><span class="s4">, power: </span><span class="s1">'Web Shooter'</span><span class="s4">, universe: </span><span class="s1">'Marvel'</span><span class="s4"> },</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย </span>{ name: </span><span class="s1">'Iron Man'</span><span class="s4">, color: </span><span class="s1">'bg-red-800'</span><span class="s4">, </span><span class="s12">IconText</span><span class="s4">: </span><span class="s1">'I'</span><span class="s4">, </span><span class="s12">IconClass</span><span class="s4">: </span><span class="s1">'text-yellow-400 text-6xl font-black'</span><span class="s4">, power: </span><span class="s1">'Repulsor Blast'</span><span class="s4">, universe: </span><span class="s1">'Marvel'</span><span class="s4"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>];</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> villains = [</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>{ name: </span><span class="s10">'Green Goblin'</span><span class="s1">, emoji: </span><span class="s10">'๐บ'</span><span class="s1">, taunt: </span><span class="s10">'You\'ll never catch me!'</span><span class="s1">, universe: </span><span class="s10">'Marvel'</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>{ name: </span><span class="s10">'Joker'</span><span class="s1">, emoji: </span><span class="s10">'๐'</span><span class="s1">, taunt: </span><span class="s10">'Let\'s put a smile on that face!'</span><span class="s1">, universe: </span><span class="s10">'DC'</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>{ name: </span><span class="s10">'Venom'</span><span class="s1">, emoji: </span><span class="s10">'๐พ'</span><span class="s1">, taunt: </span><span class="s10">'We are Venom!'</span><span class="s1">, universe: </span><span class="s10">'Marvel'</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>{ name: </span><span class="s10">'Penguin'</span><span class="s1">, emoji: </span><span class="s10">'๐ง'</span><span class="s1">, taunt: </span><span class="s10">'Wak wak wak!'</span><span class="s1">, universe: </span><span class="s10">'DC'</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>{ name: </span><span class="s10">'Mysterio'</span><span class="s1">, emoji: </span><span class="s10">'๐ญ'</span><span class="s1">, taunt: </span><span class="s10">'It\'s all an illusion!'</span><span class="s1">, universe: </span><span class="s10">'Marvel'</span><span class="s1"> }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>];</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> bossVillains = [</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>{ name: </span><span class="s10">'THANOS'</span><span class="s1">, emoji: </span><span class="s10">'๐'</span><span class="s1">, taunt: </span><span class="s10">'I am inevitable!'</span><span class="s1">, universe: </span><span class="s10">'Marvel'</span><span class="s1">, isBoss: </span><span class="s8">true</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>{ name: </span><span class="s10">'DARKSEID'</span><span class="s1">, emoji: </span><span class="s10">'๐น'</span><span class="s1">, taunt: </span><span class="s10">'Kneel before Darkseid!'</span><span class="s1">, universe: </span><span class="s10">'DC'</span><span class="s1">, isBoss: </span><span class="s8">true</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>{ name: </span><span class="s10">'ULTRON'</span><span class="s1">, emoji: </span><span class="s10">'๐ค'</span><span class="s1">, taunt: </span><span class="s10">'There are no strings on me!'</span><span class="s1">, universe: </span><span class="s10">'Marvel'</span><span class="s1">, isBoss: </span><span class="s8">true</span><span class="s1"> }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>];</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s1">// --- GAME STATE (Global Variables) ---</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> gameState = </span><span class="s10">'hero-select'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> selectedHero = </span><span class="s8">null</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> villain = </span><span class="s8">null</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> score = </span><span class="s13">0</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> villainHealth = </span><span class="s13">5</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> heroHealth = </span><span class="s13">3</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> currentQuestion = </span><span class="s8">null</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> combo = </span><span class="s13">0</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> powerUp = </span><span class="s8">null</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> isBoss = </span><span class="s8">false</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> level = </span><span class="s13">1</span><span class="s1">;</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> rootElement = document.getElementById(</span><span class="s10">'game-root'</span><span class="s1">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย</span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s1">// --- UTILITIES ---</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">function</span><span class="s1"> generateQuestion(currentLevel, isBossMode) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> difficulty = isBossMode ? </span><span class="s10">'hard'</span><span class="s1"> : currentLevel &lt;= </span><span class="s13">1</span><span class="s1"> ? </span><span class="s10">'easy'</span><span class="s1"> : currentLevel &lt;= </span><span class="s13">3</span><span class="s1"> ? </span><span class="s10">'medium'</span><span class="s1"> : </span><span class="s10">'hard'</span><span class="s1">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> operations = [</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>{ type: </span><span class="s10">'add'</span><span class="s1">, </span><span class="s8">symbol</span><span class="s1">: </span><span class="s10">'+'</span><span class="s1">, generate: (max) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> num1 = </span><span class="s12">Math</span><span class="s1">.floor(</span><span class="s12">Math</span><span class="s1">.random() * max) + </span><span class="s13">5</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> num2 = </span><span class="s12">Math</span><span class="s1">.floor(</span><span class="s12">Math</span><span class="s1">.random() * max) + </span><span class="s13">5</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1"> { num1, num2, answer: num1 + num2 };</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>}},</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>{ type: </span><span class="s10">'subtract'</span><span class="s1">, </span><span class="s8">symbol</span><span class="s1">: </span><span class="s10">'-'</span><span class="s1">, generate: (max) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> num1 = </span><span class="s12">Math</span><span class="s1">.floor(</span><span class="s12">Math</span><span class="s1">.random() * max) + </span><span class="s13">15</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> num2 = </span><span class="s12">Math</span><span class="s1">.floor(</span><span class="s12">Math</span><span class="s1">.random() * num1) + </span><span class="s13">1</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1"> { num1, num2, answer: num1 - num2 };</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>}},</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>{ type: </span><span class="s10">'multiply'</span><span class="s1">, </span><span class="s8">symbol</span><span class="s1">: </span><span class="s10">'ร'</span><span class="s1">, generate: (max) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> num1 = </span><span class="s12">Math</span><span class="s1">.floor(</span><span class="s12">Math</span><span class="s1">.random() * </span><span class="s13">9</span><span class="s1">) + </span><span class="s13">2</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> num2 = </span><span class="s12">Math</span><span class="s1">.floor(</span><span class="s12">Math</span><span class="s1">.random() * </span><span class="s13">9</span><span class="s1">) + </span><span class="s13">2</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (difficulty !== </span><span class="s10">'easy'</span><span class="s1"> &amp;&amp; </span><span class="s12">Math</span><span class="s1">.random() &gt; </span><span class="s13">0.7</span><span class="s1">) { </span><span class="s14">// Sometimes include division</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> divisor = </span><span class="s12">Math</span><span class="s1">.floor(</span><span class="s12">Math</span><span class="s1">.random() * </span><span class="s13">9</span><span class="s1">) + </span><span class="s13">2</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> quotient = </span><span class="s12">Math</span><span class="s1">.floor(</span><span class="s12">Math</span><span class="s1">.random() * </span><span class="s13">10</span><span class="s1">) + </span><span class="s13">2</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1"> { num1: divisor * quotient, num2: divisor, </span><span class="s8">symbol</span><span class="s1">: </span><span class="s10">'รท'</span><span class="s1">, answer: quotient, type: </span><span class="s10">'divide'</span><span class="s1"> };</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1"> { num1, num2, answer: num1 * num2 };</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>}}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>];</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s1">// Determine max number range based on difficulty</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> maxRange = </span><span class="s13">10</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (difficulty === </span><span class="s10">'medium'</span><span class="s1">) maxRange = </span><span class="s13">12</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (difficulty === </span><span class="s10">'hard'</span><span class="s1">) maxRange = </span><span class="s13">15</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (isBossMode) maxRange = </span><span class="s13">20</span><span class="s1">;</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> op = operations[</span><span class="s12">Math</span><span class="s1">.floor(</span><span class="s12">Math</span><span class="s1">.random() * operations.length)];</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย</span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s1">// Generate using the max range relevant to the operation</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1"> { ...op.generate(maxRange), </span><span class="s8">symbol</span><span class="s1">: op.</span><span class="s8">symbol</span><span class="s1">, type: op.type };</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">function</span><span class="s1"> updateUI() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>rootElement.innerHTML = renderContent();</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s1">// Re-attach event listeners after rendering (crucial for vanilla JS)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>attachEventListeners();</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s1">// Focus the input field if we are in battle and ready for input</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (gameState === </span><span class="s10">'battle'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> input = document.getElementById(</span><span class="s10">'answer-input'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (input) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>input.focus();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">function</span><span class="s1"> attachEventListeners() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (gameState === </span><span class="s10">'hero-select'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>document.querySelectorAll(</span><span class="s10">'.hero-select-button'</span><span class="s1">).forEach(button =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>button.onclick = (e) =&gt; selectHero(e.currentTarget.dataset.heroName);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>} </span><span class="s8">else</span><span class="s1"> </span><span class="s8">if</span><span class="s1"> (gameState === </span><span class="s10">'battle'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> attackButton = document.getElementById(</span><span class="s10">'attack-button'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (attackButton) attackButton.onclick = checkAnswer;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> answerInput = document.getElementById(</span><span class="s10">'answer-input'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (answerInput) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>answerInput.onkeyup = (e) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (e.key === </span><span class="s10">'Enter'</span><span class="s1">) checkAnswer();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>};</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>} </span><span class="s8">else</span><span class="s1"> </span><span class="s8">if</span><span class="s1"> (gameState === </span><span class="s10">'level-complete'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> nextButton = document.getElementById(</span><span class="s10">'next-level-button'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (nextButton) nextButton.onclick = () =&gt; startNewLevel(level + </span><span class="s13">1</span><span class="s1">, </span><span class="s8">false</span><span class="s1">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> bossButton = document.getElementById(</span><span class="s10">'boss-battle-button'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (bossButton) bossButton.onclick = () =&gt; startNewLevel(level, </span><span class="s8">true</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>} </span><span class="s8">else</span><span class="s1"> </span><span class="s8">if</span><span class="s1"> (gameState === </span><span class="s10">'victory'</span><span class="s1"> || gameState === </span><span class="s10">'game-over'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> newGameButton = document.getElementById(</span><span class="s10">'new-game-button'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (newGameButton) newGameButton.onclick = () =&gt; { gameState = </span><span class="s10">'hero-select'</span><span class="s1">; updateUI(); };</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> tryAgainButton = document.getElementById(</span><span class="s10">'try-again-button'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (tryAgainButton) tryAgainButton.onclick = () =&gt; startNewLevel(level, isBoss);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> continueButton = document.getElementById(</span><span class="s10">'continue-button'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (continueButton) continueButton.onclick = () =&gt; startNewLevel(level + </span><span class="s13">1</span><span class="s1">, </span><span class="s8">false</span><span class="s1">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> changeHeroButton = document.getElementById(</span><span class="s10">'change-hero-button'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (changeHeroButton) changeHeroButton.onclick = () =&gt; { gameState = </span><span class="s10">'hero-select'</span><span class="s1">; updateUI(); };</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s1">// --- GAME LOGIC FUNCTIONS ---</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">function</span><span class="s1"> startNewLevel(newLevel, boss) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>level = newLevel;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>isBoss = boss;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> opponentVillains = boss ? bossVillains : villains;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> fallbackVillains = boss ? bossVillains : villains;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย</span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s1">// Select a villain from the opposite universe if possible</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> opponentOptions = opponentVillains.filter(v =&gt; v.universe !== selectedHero.universe);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>villain = opponentOptions.length &gt; </span><span class="s13">0</span><span class="s1"><span class="Apple-converted-space">ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>? opponentOptions[</span><span class="s12">Math</span><span class="s1">.floor(</span><span class="s12">Math</span><span class="s1">.random() * opponentOptions.length)]</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>: fallbackVillains[</span><span class="s12">Math</span><span class="s1">.floor(</span><span class="s12">Math</span><span class="s1">.random() * fallbackVillains.length)];</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>villainHealth = boss ? </span><span class="s13">10</span><span class="s1"> : </span><span class="s13">5</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>heroHealth = </span><span class="s13">3</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>combo = </span><span class="s13">0</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>powerUp = </span><span class="s8">null</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>currentQuestion = generateQuestion(newLevel, boss);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>gameState = </span><span class="s10">'battle'</span><span class="s1">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>updateUI();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">function</span><span class="s1"> selectHero(heroName) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>selectedHero = heroes.find(h =&gt; h.name === heroName);</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s1">// Start game immediately after selection</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>startNewLevel(</span><span class="s13">1</span><span class="s1">, </span><span class="s8">false</span><span class="s1">);<span class="Apple-converted-space">ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">function</span><span class="s1"> triggerAnimation(animationType, callback) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> animationOverlay = document.getElementById(</span><span class="s10">'animation-overlay'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> root = document.querySelector(</span><span class="s10">'body'</span><span class="s1">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (animationOverlay) {</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s1">// Clear previous animation classes</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> animationText = animationOverlay.querySelector(</span><span class="s10">'div'</span><span class="s1">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย</span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s1">// Set animation text properties</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (animationType === </span><span class="s10">'COMBO!'</span><span class="s1">) {</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>animationText.className = </span><span class="s1">`text-7xl md:text-9xl font-black text-yellow-300 explode pulse-glow`</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>animationText.textContent = </span><span class="s10">'COMBO!'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>} </span><span class="s8">else</span><span class="s1"> </span><span class="s8">if</span><span class="s1"> (animationType === </span><span class="s10">'POW'</span><span class="s1">) {</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>animationText.className = </span><span class="s1">`text-7xl md:text-9xl font-black text-red-500 explode`</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>animationText.textContent = </span><span class="s10">'POW!'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>} </span><span class="s8">else</span><span class="s1"> </span><span class="s8">if</span><span class="s1"> (animationType === </span><span class="s10">'MISS'</span><span class="s1">) {</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>animationText.className = </span><span class="s1">`text-7xl md:text-9xl font-black text-gray-400 explode`</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>animationText.textContent = </span><span class="s10">'MISS!'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s1">// Trigger shake if damage taken</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (animationType === </span><span class="s10">'MISS'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (root) root.classList.add(</span><span class="s10">'shake'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s1">// Wait for animation duration then proceed</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>setTimeout(() =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (animationOverlay) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>animationOverlay.querySelector(</span><span class="s10">'div'</span><span class="s1">).textContent = </span><span class="s10">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>animationOverlay.querySelector(</span><span class="s10">'div'</span><span class="s1">).className = </span><span class="s10">''</span><span class="s1">; </span><span class="s14">// Clear classes</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (root) root.classList.remove(</span><span class="s10">'shake'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>callback();</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย </span>}, </span><span class="s13">800</span><span class="s4">); </span><span class="s1">// Shorter duration for smoother gameplay</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">function</span><span class="s1"> checkAnswer() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> input = document.getElementById(</span><span class="s10">'answer-input'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> feedbackBox = document.getElementById(</span><span class="s10">'feedback-box'</span><span class="s1">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (!input || !feedbackBox || input.value === </span><span class="s10">''</span><span class="s1"> || isNaN(parseInt(input.value, </span><span class="s13">10</span><span class="s1">))) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> submittedAnswer = parseInt(input.value, </span><span class="s13">10</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> correct = submittedAnswer === currentQuestion.answer;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย</span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s1">// Disable input and button while feedback is showing</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>input.disabled = </span><span class="s8">true</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>document.getElementById(</span><span class="s10">'attack-button'</span><span class="s1">).disabled = </span><span class="s8">true</span><span class="s1">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> animationText = </span><span class="s10">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> finalVillainHealth = villainHealth;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> finalHeroHealth = heroHealth;</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (correct) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>score++;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>combo++;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>animationText = combo &gt; </span><span class="s13">1</span><span class="s1"> ? </span><span class="s10">'COMBO!'</span><span class="s1"> : </span><span class="s10">'POW'</span><span class="s1">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> damage = </span><span class="s13">1</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (combo &gt; </span><span class="s13">1</span><span class="s1">) damage += </span><span class="s13">1</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> finalDamage = damage;</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (powerUp === </span><span class="s10">'DOUBLE'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>finalDamage *= </span><span class="s13">2</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>powerUp = </span><span class="s8">null</span><span class="s1">; </span><span class="s14">// Power up consumed</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>finalVillainHealth = villainHealth - finalDamage;</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>feedbackBox.className = </span><span class="s1">'mt-4 md:mt-6 py-4 md:py-6 rounded-2xl text-2xl md:text-4xl font-black border-4 md:border-6 border-black shadow-xl bg-green-600 text-white slide-in'</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>feedbackBox.innerHTML = </span><span class="s10">`โก DIRECT HIT! -</span><span class="s1">${finalDamage}</span><span class="s10"> HP`</span><span class="s1">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>} </span><span class="s8">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>combo = </span><span class="s13">0</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>animationText = </span><span class="s10">'MISS'</span><span class="s1">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> damageTaken = </span><span class="s13">1</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> damageText = </span><span class="s10">'-1 HP'</span><span class="s1">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (powerUp === </span><span class="s10">'SHIELD'</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>damageTaken = </span><span class="s13">0</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>powerUp = </span><span class="s8">null</span><span class="s1">; </span><span class="s14">// Power up consumed</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>damageText = </span><span class="s10">'SHIELD!'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>finalHeroHealth = heroHealth - damageTaken;</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>feedbackBox.className = </span><span class="s1">'mt-4 md:mt-6 py-4 md:py-6 rounded-2xl text-2xl md:text-4xl font-black border-4 md:border-6 border-black shadow-xl bg-gray-600 text-white slide-in'</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>feedbackBox.innerHTML = </span><span class="s10">`โ MISSED! </span><span class="s1">${damageText}</span><span class="s10"> (Answer: </span><span class="s1">${currentQuestion.answer}</span><span class="s10">)`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s1">// Update state variables after calculations but before animation callback</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>villainHealth = finalVillainHealth;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>heroHealth = finalHeroHealth;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>triggerAnimation(animationText, () =&gt; {</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s1">// Check win/loss conditions</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (villainHealth &lt;= </span><span class="s13">0</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>gameState = isBoss ? </span><span class="s10">'victory'</span><span class="s1"> : </span><span class="s10">'level-complete'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>} </span><span class="s8">else</span><span class="s1"> </span><span class="s8">if</span><span class="s1"> (heroHealth &lt;= </span><span class="s13">0</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>gameState = </span><span class="s10">'game-over'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>} </span><span class="s8">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s14">// Continue battle</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>currentQuestion = generateQuestion(level, isBoss);</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s1">// 1 in 5 chance to find a power-up if one isn't active</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (!powerUp &amp;&amp; </span><span class="s12">Math</span><span class="s1">.random() &lt; </span><span class="s13">0.25</span><span class="s1"> &amp;&amp; !isBoss) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> powerUpsList = [</span><span class="s10">'DOUBLE'</span><span class="s1">, </span><span class="s10">'SHIELD'</span><span class="s1">];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>powerUp = powerUpsList[</span><span class="s12">Math</span><span class="s1">.floor(</span><span class="s12">Math</span><span class="s1">.random() * powerUpsList.length)];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย</span></span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s1">// Clear input and re-enable for next round (or transition to next state)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>input.value = </span><span class="s10">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>input.disabled = </span><span class="s8">false</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>document.getElementById(</span><span class="s10">'attack-button'</span><span class="s1">).disabled = </span><span class="s8">false</span><span class="s1">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>updateUI(); </span><span class="s14">// Re-render the game state</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s1">// --- RENDER HTML TEMPLATES ---</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">function</span><span class="s1"> renderHealthBar(current, max, color) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> percentage = </span><span class="s12">Math</span><span class="s1">.max(</span><span class="s13">0</span><span class="s1">, (current / max) * </span><span class="s13">100</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1"> </span><span class="s10">`</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>&lt;div class="h-4 md:h-6 w-full bg-gray-300 rounded-full overflow-hidden shadow-inner"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;div class="h-full </span><span class="s4">${color}</span><span class="s1"> transition-all duration-300 ease-out rounded-full" style="width: </span><span class="s4">${percentage}</span><span class="s1">%;"&gt;&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>&lt;div class="text-xs md:text-sm font-semibold mt-1 text-white"&gt;</span><span class="s4">${current}</span><span class="s1"> / </span><span class="s4">${max}</span><span class="s1"> HP&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>`</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">function</span><span class="s1"> renderHeroSelect() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1"> </span><span class="s10">`</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>&lt;div class="max-w-4xl mx-auto p-4 md:p-8 bg-white/10 backdrop-blur-sm rounded-3xl shadow-2xl text-center slide-in"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;h1 class="text-4xl md:text-5xl font-extrabold text-yellow-300 mb-6 border-b-4 border-yellow-500 pb-2"&gt;CHOOSE YOUR HERO&lt;/h1&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;p class="text-white mb-8 text-lg md:text-xl"&gt;Select a legendary hero to battle the forces of math crime across the multiverse!&lt;/p&gt;</span></p>
<p class="p10"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย ย ย</span></span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;div class="grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-8"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span></span><span class="s4">${heroes.map(hero =&gt; </span><span class="s1">`</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;button class="hero-select-button </span><span class="s4">${hero.color}</span><span class="s1"> p-4 md:p-6 rounded-xl hover:shadow-xl transition duration-200 transform hover:scale-105 border-4 border-white/50" data-hero-name="</span><span class="s4">${hero.name}</span><span class="s1">"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;div class="w-20 h-20 mx-auto rounded-full bg-black flex items-center justify-center mb-3 shadow-lg"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;span class="</span><span class="s4">${hero.</span><span class="s12">IconClass</span><span class="s4">}</span><span class="s1">"&gt;</span><span class="s4">${hero.</span><span class="s12">IconText</span><span class="s4">}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;h2 class="text-xl md:text-2xl font-bold text-white"&gt;</span><span class="s4">${hero.name}</span><span class="s1">&lt;/h2&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;p class="text-sm md:text-base text-gray-300"&gt;</span><span class="s4">${hero.power}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/button&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>`</span><span class="s4">).join(</span><span class="s1">''</span><span class="s4">)}</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>`</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">function</span><span class="s1"> renderBattleScreen() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> maxHeroHealth = </span><span class="s13">3</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> maxVillainHealth = isBoss ? </span><span class="s13">10</span><span class="s1"> : </span><span class="s13">5</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> heroIconClass = selectedHero.</span><span class="s12">IconClass</span><span class="s1">.replace(</span><span class="s10">'text-6xl'</span><span class="s1">, </span><span class="s10">'text-4xl md:text-6xl'</span><span class="s1">);</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s1">// Determine difficulty label</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">let</span><span class="s1"> difficultyText = </span><span class="s10">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (level === </span><span class="s13">1</span><span class="s1">) difficultyText = </span><span class="s10">'EASY'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">else</span><span class="s1"> </span><span class="s8">if</span><span class="s1"> (level &lt;= </span><span class="s13">3</span><span class="s1">) difficultyText = </span><span class="s10">'MEDIUM'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">else</span><span class="s1"> difficultyText = </span><span class="s10">'HARD'</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">if</span><span class="s1"> (isBoss) difficultyText = </span><span class="s10">'BOSS BATTLE!'</span><span class="s1">;</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1"> </span><span class="s10">`</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>&lt;div class="max-w-4xl mx-auto p-4 md:p-8 bg-white/10 backdrop-blur-sm rounded-3xl shadow-2xl text-white slide-in"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;div class="text-center mb-4"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;h1 class="text-3xl md:text-4xl font-extrabold text-yellow-300"&gt;Level </span><span class="s4">${level}</span><span class="s1"> - </span><span class="s4">${difficultyText}</span><span class="s1">&lt;/h1&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;p class="text-xl text-gray-300"&gt;Score: </span><span class="s4">${score}</span><span class="s1"> | Combo: </span><span class="s4">${combo}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;!-- Character Stats --&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;div class="flex justify-between items-start mb-6"&gt;</span></p>
<p class="p10"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย ย ย ย ย</span></span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;!-- Hero Card --&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;div class="w-1/2 p-2 md:p-4 bg-blue-800/50 rounded-xl shadow-lg mr-2 border-2 border-blue-400"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;div class="flex items-center"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;div class="w-10 h-10 md:w-16 md:h-16 rounded-full bg-black flex items-center justify-center mr-3 float"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;span class="</span><span class="s4">${heroIconClass}</span><span class="s1">"&gt;</span><span class="s4">${selectedHero.</span><span class="s12">IconText</span><span class="s4">}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;h2 class="text-xl md:text-2xl font-bold"&gt;</span><span class="s4">${selectedHero.name}</span><span class="s1">&lt;/h2&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span></span><span class="s4">${renderHealthBar(heroHealth, maxHeroHealth, </span><span class="s1">'bg-green-500'</span><span class="s4">)}</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;div class="mt-2 text-sm text-gray-300"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span></span><span class="s4">${powerUp ? </span><span class="s1">`&lt;span class="inline-block bg-yellow-500 text-black px-2 py-1 rounded-full font-bold text-xs pulse-glow"&gt;POWER UP: </span><span class="s4">${powerUp}</span><span class="s1">&lt;/span&gt;`</span><span class="s4"> : </span><span class="s1">''</span><span class="s4">}</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;!-- Villain Card --&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;div class="w-1/2 p-2 md:p-4 bg-red-800/50 rounded-xl shadow-lg ml-2 border-2 border-red-400 text-right"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;div class="flex items-center justify-end"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;h2 class="text-xl md:text-2xl font-bold"&gt;</span><span class="s4">${villain.name}</span><span class="s1">&lt;/h2&gt;</span></p>
<p class="p5"><span class="s10"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span></span><span class="s1">${renderHealthBar(villainHealth, maxVillainHealth, </span><span class="s10">'bg-red-500'</span><span class="s1">)}</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;div class="w-10 h-10 md:w-16 md:h-16 text-4xl md:text-6xl flex items-center justify-center ml-3 float"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span></span><span class="s4">${villain.emoji}</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;!-- Battle Action Area --&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;div class="bg-gray-800 p-6 md:p-8 rounded-2xl shadow-xl text-center"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;p class="text-xl md:text-2xl italic text-gray-400 mb-4"&gt;"</span><span class="s4">${villain.taunt}</span><span class="s1">"&lt;/p&gt;</span></p>
<p class="p10"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย ย ย ย ย</span></span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;!-- Question Box --&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;div class="bg-yellow-400 text-black p-4 md:p-6 rounded-xl mb-6 shadow-2xl"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;p class="text-4xl md:text-6xl font-black"&gt;</span><span class="s4">${currentQuestion.num1}</span><span class="s1"> </span><span class="s4">${currentQuestion.</span><span class="s8">symbol</span><span class="s4">}</span><span class="s1"> </span><span class="s4">${currentQuestion.num2}</span><span class="s1"> = ?&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;!-- Input and Attack --&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;div class="flex flex-col md:flex-row gap-4"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;input<span class="Apple-converted-space">ย</span></span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>id="answer-input"</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>type="number"<span class="Apple-converted-space">ย</span></span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>placeholder="Your answer"<span class="Apple-converted-space">ย</span></span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>class="flex-grow p-3 md:p-4 text-2xl text-center rounded-xl bg-white text-gray-800 border-4 border-yellow-500 focus:outline-none focus:border-blue-500 transition duration-150"</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>inputmode="numeric"</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>/&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;button<span class="Apple-converted-space">ย</span></span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>id="attack-button"</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>class="px-6 py-3 md:py-4 bg-red-600 text-white text-xl font-bold rounded-xl shadow-lg transition duration-200 hover:bg-red-700 hover:shadow-xl transform active:scale-95 whitespace-nowrap"</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span></span><span class="s4">${selectedHero.power}</span><span class="s1"> ATTACK!</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/button&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p10"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย ย ย ย ย</span></span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;!-- Feedback Box --&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;div id="feedback-box" class="mt-4 py-4 rounded-2xl text-2xl font-black text-white invisible"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>Awaiting action...</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>`</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">function</span><span class="s1"> renderLevelComplete() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">const</span><span class="s1"> isMegaBoss = villain.isBoss;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1"> </span><span class="s10">`</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>&lt;div class="max-w-md mx-auto p-8 bg-green-700/80 backdrop-blur-sm rounded-3xl shadow-2xl text-center text-white slide-in"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;h1 class="text-5xl font-extrabold text-yellow-300 mb-4"&gt;VICTORY!&lt;/h1&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;p class="text-2xl mb-6"&gt;You defeated the </span><span class="s4">${villain.name}</span><span class="s1">!&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;p class="text-xl mb-8"&gt;Current Score: </span><span class="s4">${score}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s4">${isMegaBoss ? </span><span class="s1">`</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;p class="text-3xl font-bold mb-8"&gt;You have conquered the BOSS BATTLE!&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;button id="new-game-button" class="w-full mb-4 py-3 bg-yellow-500 text-black text-xl font-bold rounded-xl shadow-lg transition hover:bg-yellow-400"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>START NEW GAME</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/button&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;button id="change-hero-button" class="w-full py-3 bg-gray-500 text-white text-xl font-bold rounded-xl shadow-lg transition hover:bg-gray-600"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>CHOOSE NEW HERO</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/button&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>`</span><span class="s4"> : </span><span class="s1">`</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;button id="next-level-button" class="w-full mb-4 py-3 bg-blue-600 text-white text-xl font-bold rounded-xl shadow-lg transition hover:bg-blue-700"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>PROCEED TO LEVEL </span><span class="s4">${level + </span><span class="s13">1</span><span class="s4">}</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/button&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;button id="boss-battle-button" class="w-full py-3 bg-red-600 text-white text-xl font-bold rounded-xl shadow-lg transition hover:bg-red-700 pulse-glow"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย ย ย </span>CHALLENGE A BOSS NOW!</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>&lt;/button&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>`</span><span class="s4">}</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>`</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">function</span><span class="s1"> renderGameOver() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1"> </span><span class="s10">`</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>&lt;div class="max-w-md mx-auto p-8 bg-red-800/80 backdrop-blur-sm rounded-3xl shadow-2xl text-center text-white slide-in"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;h1 class="text-5xl font-extrabold text-yellow-300 mb-4"&gt;GAME OVER&lt;/h1&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;p class="text-2xl mb-6"&gt;The </span><span class="s4">${villain.name}</span><span class="s1"> overpowered you.&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;p class="text-xl mb-8"&gt;Final Score: </span><span class="s4">${score}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p10"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย ย ย</span></span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;button id="try-again-button" class="w-full mb-4 py-3 bg-blue-600 text-white text-xl font-bold rounded-xl shadow-lg transition hover:bg-blue-700"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>RETRY LEVEL </span><span class="s4">${level}</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;/button&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;button id="new-game-button" class="w-full py-3 bg-gray-500 text-white text-xl font-bold rounded-xl shadow-lg transition hover:bg-gray-600"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>START NEW GAME</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;/button&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>`</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย</span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">function</span><span class="s1"> renderVictoryScreen() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1"> </span><span class="s10">`</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>&lt;div class="max-w-md mx-auto p-8 bg-purple-800/80 backdrop-blur-sm rounded-3xl shadow-2xl text-center text-white slide-in"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;h1 class="text-5xl font-extrabold text-yellow-300 mb-4"&gt;EPIC VICTORY!&lt;/h1&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;p class="text-2xl mb-6"&gt;You have defeated the mighty </span><span class="s4">${villain.name}</span><span class="s1"> and saved the day!&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;p class="text-xl mb-8"&gt;Final Score: </span><span class="s4">${score}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p10"><span class="s1"><span class="Apple-converted-space">ยย ย ย ย ย ย ย ย ย ย</span></span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;button id="continue-button" class="w-full mb-4 py-3 bg-green-600 text-white text-xl font-bold rounded-xl shadow-lg transition hover:bg-green-700"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>CONTINUE ADVENTURE (Level </span><span class="s4">${level + </span><span class="s13">1</span><span class="s4">}</span><span class="s1">)</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;/button&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;button id="change-hero-button" class="w-full py-3 bg-gray-500 text-white text-xl font-bold rounded-xl shadow-lg transition hover:bg-gray-600"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย ย ย </span>CHOOSE NEW HERO</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span>&lt;/button&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>`</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s8">function</span><span class="s1"> renderContent() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span></span><span class="s8">switch</span><span class="s1"> (gameState) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">case</span><span class="s1"> </span><span class="s10">'hero-select'</span><span class="s1">:</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1"> renderHeroSelect();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">case</span><span class="s1"> </span><span class="s10">'battle'</span><span class="s1">:</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1"> renderBattleScreen();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">case</span><span class="s1"> </span><span class="s10">'level-complete'</span><span class="s1">:</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1"> renderLevelComplete();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">case</span><span class="s1"> </span><span class="s10">'game-over'</span><span class="s1">:</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1"> renderGameOver();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">case</span><span class="s1"> </span><span class="s10">'victory'</span><span class="s1">:</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1"> renderVictoryScreen();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย </span></span><span class="s8">default</span><span class="s1">:</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย ย ย ย ย </span></span><span class="s8">return</span><span class="s1"> renderHeroSelect();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย ย ย </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>}</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s1">// --- INITIALIZATION ---</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">ย ย ย ย </span></span><span class="s1">// Start the game by rendering the initial state</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">ย ย ย ย </span>document.addEventListener(</span><span class="s10">'DOMContentLoaded'</span><span class="s1">, updateUI);</span></p>
<p class="p7"><span class="s7"></span><br></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">ย ย </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
</body>
</html>
