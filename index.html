{\rtf1\ansi\ansicpg1252\cocoartf2865
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fnil\fcharset0 Menlo-Regular;}
{\colortbl;\red255\green255\blue255;\red109\green109\blue109;\red236\green241\blue247;\red251\green0\blue7;
\red0\green0\blue0;\red42\green42\blue42;\red107\green0\blue1;\red0\green0\blue255;\red77\green80\blue85;
\red111\green14\blue195;\red9\green60\blue148;\red24\green112\blue43;\red19\green118\blue70;\red14\green110\blue109;
\red164\green69\blue11;}
{\*\expandedcolortbl;;\cssrgb\c50196\c50196\c50196;\cssrgb\c94118\c95686\c97647;\cssrgb\c100000\c0\c0;
\cssrgb\c0\c0\c0;\cssrgb\c21961\c21961\c21961;\cssrgb\c50196\c0\c0;\cssrgb\c0\c0\c100000;\cssrgb\c37255\c38824\c40784;
\cssrgb\c51765\c18824\c80784;\cssrgb\c1569\c31765\c64706;\cssrgb\c9412\c50196\c21961;\cssrgb\c3529\c52549\c34510;\cssrgb\c0\c50196\c50196;
\cssrgb\c70980\c34902\c3137;}
\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\fs28 \cf2 \cb3 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 <!DOCTYPE\cf4 \strokec4  html\cf2 \strokec2 >\cf0 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 <\cf7 \strokec7 html\cf0 \strokec5  \cf4 \strokec4 lang\cf6 \strokec6 =\cf8 \strokec8 "en"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cf6 \cb3 \strokec6 <\cf7 \strokec7 head\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf0 \cb3 \strokec5     \cf6 \strokec6 <\cf7 \strokec7 meta\cf0 \strokec5  \cf4 \strokec4 charset\cf6 \strokec6 =\cf8 \strokec8 "UTF-8"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3 \strokec5     \cf6 \strokec6 <\cf7 \strokec7 meta\cf0 \strokec5  \cf4 \strokec4 name\cf6 \strokec6 =\cf8 \strokec8 "viewport"\cf0 \strokec5  \cf4 \strokec4 content\cf6 \strokec6 =\cf8 \strokec8 "width=device-width, initial-scale=1.0"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3 \strokec5     \cf6 \strokec6 <\cf7 \strokec7 title\cf6 \strokec6 >\cf0 \strokec5 Superhero Math Battle\cf6 \strokec6 </\cf7 \strokec7 title\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3 \strokec5     \cf9 \strokec9 <!-- Load Tailwind CSS -->\cf0 \cb1 \strokec5 \
\cb3 \strokec5     \cf6 \strokec6 <\cf7 \strokec7 script\cf0 \strokec5  \cf4 \strokec4 src\cf6 \strokec6 =\cf8 \strokec8 "https://cdn.tailwindcss.com"\cf6 \strokec6 ></\cf7 \strokec7 script\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\
\cb3 \strokec5     \cf9 \strokec9 <!-- Configure Tailwind for custom colors and font -->\cf0 \cb1 \strokec5 \
\cb3 \strokec5     \cf6 \strokec6 <\cf7 \strokec7 style\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 @import\cf0 \strokec5  \cf11 \strokec11 url\cf0 \strokec5 (\cf12 \strokec12 'https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5         \cf7 \strokec7 :root\cf0 \strokec5  \{\cb1 \strokec5 \
\cb3 \strokec5             \cf4 \strokec4 font-family:\cf0 \strokec5  \cf12 \strokec12 'Inter'\cf0 \strokec5 , \cf11 \strokec11 sans-serif\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5         \}\cb1 \strokec5 \
\
\cb3 \strokec5         \cf9 \strokec9 /* --- CSS Keyframe Definitions (Pure CSS Animations) --- */\cf0 \cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 @keyframes\cf0 \strokec5  \cf11 \strokec11 shake\cf0 \strokec5  \{\cb1 \strokec5 \
\cb3 \strokec5             \cf13 \strokec13 0%\cf0 \strokec5 , \cf13 \strokec13 100%\cf0 \strokec5  \{ \cf4 \strokec4 transform:\cf0 \strokec5  \cf11 \strokec11 translateX(\cf13 \strokec13 0\cf11 \strokec11 )\cf0 \strokec5 ; \}\cb1 \strokec5 \
\cb3 \strokec5             \cf13 \strokec13 25%\cf0 \strokec5  \{ \cf4 \strokec4 transform:\cf0 \strokec5  \cf11 \strokec11 translateX(\cf13 \strokec13 -10px\cf11 \strokec11 )\cf0 \strokec5  \cf11 \strokec11 rotate(\cf13 \strokec13 -5deg\cf11 \strokec11 )\cf0 \strokec5 ; \}\cb1 \strokec5 \
\cb3 \strokec5             \cf13 \strokec13 75%\cf0 \strokec5  \{ \cf4 \strokec4 transform:\cf0 \strokec5  \cf11 \strokec11 translateX(\cf13 \strokec13 10px\cf11 \strokec11 )\cf0 \strokec5  \cf11 \strokec11 rotate(\cf13 \strokec13 5deg\cf11 \strokec11 )\cf0 \strokec5 ; \}\cb1 \strokec5 \
\cb3 \strokec5         \}\cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 @keyframes\cf0 \strokec5  \cf11 \strokec11 explode\cf0 \strokec5  \{\cb1 \strokec5 \
\cb3 \strokec5             \cf13 \strokec13 0%\cf0 \strokec5  \{ \cf4 \strokec4 transform:\cf0 \strokec5  \cf11 \strokec11 scale(\cf13 \strokec13 0\cf11 \strokec11 )\cf0 \strokec5  \cf11 \strokec11 rotate(\cf13 \strokec13 0deg\cf11 \strokec11 )\cf0 \strokec5 ; \cf4 \strokec4 opacity:\cf0 \strokec5  \cf13 \strokec13 1\cf0 \strokec5 ; \}\cb1 \strokec5 \
\cb3 \strokec5             \cf13 \strokec13 50%\cf0 \strokec5  \{ \cf4 \strokec4 transform:\cf0 \strokec5  \cf11 \strokec11 scale(\cf13 \strokec13 1.5\cf11 \strokec11 )\cf0 \strokec5  \cf11 \strokec11 rotate(\cf13 \strokec13 180deg\cf11 \strokec11 )\cf0 \strokec5 ; \cf4 \strokec4 opacity:\cf0 \strokec5  \cf13 \strokec13 0.8\cf0 \strokec5 ; \}\cb1 \strokec5 \
\cb3 \strokec5             \cf13 \strokec13 100%\cf0 \strokec5  \{ \cf4 \strokec4 transform:\cf0 \strokec5  \cf11 \strokec11 scale(\cf13 \strokec13 3\cf11 \strokec11 )\cf0 \strokec5  \cf11 \strokec11 rotate(\cf13 \strokec13 360deg\cf11 \strokec11 )\cf0 \strokec5 ; \cf4 \strokec4 opacity:\cf0 \strokec5  \cf13 \strokec13 0\cf0 \strokec5 ; \}\cb1 \strokec5 \
\cb3 \strokec5         \}\cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 @keyframes\cf0 \strokec5  \cf11 \strokec11 pulse-glow\cf0 \strokec5  \{\cb1 \strokec5 \
\cb3 \strokec5             \cf13 \strokec13 0%\cf0 \strokec5 , \cf13 \strokec13 100%\cf0 \strokec5  \{ \cf4 \strokec4 box-shadow:\cf0 \strokec5  \cf13 \strokec13 0\cf0 \strokec5  \cf13 \strokec13 0\cf0 \strokec5  \cf13 \strokec13 20px\cf0 \strokec5  \cf11 \strokec11 rgba(\cf13 \strokec13 255\cf0 \strokec5 , \cf13 \strokec13 255\cf0 \strokec5 , \cf13 \strokec13 0\cf0 \strokec5 , \cf13 \strokec13 0.8\cf11 \strokec11 )\cf0 \strokec5 ; \}\cb1 \strokec5 \
\cb3 \strokec5             \cf13 \strokec13 50%\cf0 \strokec5  \{ \cf4 \strokec4 box-shadow:\cf0 \strokec5  \cf13 \strokec13 0\cf0 \strokec5  \cf13 \strokec13 0\cf0 \strokec5  \cf13 \strokec13 40px\cf0 \strokec5  \cf11 \strokec11 rgba(\cf13 \strokec13 255\cf0 \strokec5 , \cf13 \strokec13 255\cf0 \strokec5 , \cf13 \strokec13 0\cf0 \strokec5 , \cf13 \strokec13 1\cf11 \strokec11 )\cf0 \strokec5 , \cf13 \strokec13 0\cf0 \strokec5  \cf13 \strokec13 0\cf0 \strokec5  \cf13 \strokec13 60px\cf0 \strokec5  \cf11 \strokec11 rgba(\cf13 \strokec13 255\cf0 \strokec5 , \cf13 \strokec13 255\cf0 \strokec5 , \cf13 \strokec13 0\cf0 \strokec5 , \cf13 \strokec13 0.6\cf11 \strokec11 )\cf0 \strokec5 ; \}\cb1 \strokec5 \
\cb3 \strokec5         \}\cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 @keyframes\cf0 \strokec5  \cf11 \strokec11 slide-in\cf0 \strokec5  \{\cb1 \strokec5 \
\cb3 \strokec5             \cf11 \strokec11 from\cf0 \strokec5  \{ \cf4 \strokec4 opacity:\cf0 \strokec5  \cf13 \strokec13 0\cf0 \strokec5 ; \}\cb1 \strokec5 \
\cb3 \strokec5             \cf11 \strokec11 to\cf0 \strokec5  \{ \cf4 \strokec4 opacity:\cf0 \strokec5  \cf13 \strokec13 1\cf0 \strokec5 ; \}\cb1 \strokec5 \
\cb3 \strokec5         \}\cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 @keyframes\cf0 \strokec5  \cf11 \strokec11 float\cf0 \strokec5  \{\cb1 \strokec5 \
\cb3 \strokec5             \cf13 \strokec13 0%\cf0 \strokec5 , \cf13 \strokec13 100%\cf0 \strokec5  \{ \cf4 \strokec4 transform:\cf0 \strokec5  \cf11 \strokec11 translateY(\cf13 \strokec13 0px\cf11 \strokec11 )\cf0 \strokec5 ; \}\cb1 \strokec5 \
\cb3 \strokec5             \cf13 \strokec13 50%\cf0 \strokec5  \{ \cf4 \strokec4 transform:\cf0 \strokec5  \cf11 \strokec11 translateY(\cf13 \strokec13 -10px\cf11 \strokec11 )\cf0 \strokec5 ; \}\cb1 \strokec5 \
\cb3 \strokec5         \}\cb1 \strokec5 \
\cb3 \strokec5         \cf7 \strokec7 .shake\cf0 \strokec5  \{ \cf4 \strokec4 animation:\cf0 \strokec5  \cf11 \strokec11 shake\cf0 \strokec5  \cf13 \strokec13 0.5s\cf0 \strokec5 ; \}\cb1 \strokec5 \
\cb3 \strokec5         \cf7 \strokec7 .explode\cf0 \strokec5  \{ \cf4 \strokec4 animation:\cf0 \strokec5  \cf11 \strokec11 explode\cf0 \strokec5  \cf13 \strokec13 0.6s\cf0 \strokec5  \cf11 \strokec11 ease-out\cf0 \strokec5 ; \}\cb1 \strokec5 \
\cb3 \strokec5         \cf7 \strokec7 .pulse-glow\cf0 \strokec5  \{ \cf4 \strokec4 animation:\cf0 \strokec5  \cf11 \strokec11 pulse-glow\cf0 \strokec5  \cf13 \strokec13 1s\cf0 \strokec5  \cf11 \strokec11 infinite\cf0 \strokec5 ; \}\cb1 \strokec5 \
\cb3 \strokec5         \cf7 \strokec7 .slide-in\cf0 \strokec5  \{ \cf4 \strokec4 animation:\cf0 \strokec5  \cf11 \strokec11 slide-in\cf0 \strokec5  \cf13 \strokec13 0.5s\cf0 \strokec5 ; \}\cb1 \strokec5 \
\cb3 \strokec5         \cf7 \strokec7 .float\cf0 \strokec5  \{ \cf4 \strokec4 animation:\cf0 \strokec5  \cf11 \strokec11 float\cf0 \strokec5  \cf13 \strokec13 2s\cf0 \strokec5  \cf11 \strokec11 ease-in-out\cf0 \strokec5  \cf11 \strokec11 infinite\cf0 \strokec5 ; \}\cb1 \strokec5 \
\cb3 \strokec5     \cf6 \strokec6 </\cf7 \strokec7 style\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 </\cf7 \strokec7 head\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cf6 \cb3 \strokec6 <\cf7 \strokec7 body\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "bg-gradient-to-b from-blue-900 via-purple-900 to-black min-h-screen p-4"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf0 \cb3 \strokec5     \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "game-root"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3 \strokec5         \cf9 \strokec9 <!-- Game content will render here -->\cf0 \cb1 \strokec5 \
\cb3 \strokec5     \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3 \strokec5     \cb1 \strokec5 \
\cb3 \strokec5     \cf9 \strokec9 <!-- Animation Overlay for POW/MISS effects -->\cf0 \cb1 \strokec5 \
\cb3 \strokec5     \cf6 \strokec6 <\cf7 \strokec7 div\cf0 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf8 \strokec8 "animation-overlay"\cf0 \strokec5  \cf4 \strokec4 class\cf6 \strokec6 =\cf8 \strokec8 "absolute inset-0 flex items-center justify-center z-20 pointer-events-none"\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3 \strokec5         \cf6 \strokec6 <\cf7 \strokec7 div\cf6 \strokec6 ></\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3 \strokec5     \cf6 \strokec6 </\cf7 \strokec7 div\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\
\cb3 \strokec5     \cf6 \strokec6 <\cf7 \strokec7 script\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cb3 \strokec5         \cf9 \strokec9 // --- DATA ---\cf0 \cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 const\cf0 \strokec5  heroes = [\cb1 \strokec5 \
\cb3 \strokec5             \{ name: \cf12 \strokec12 'Batman'\cf0 \strokec5 , color: \cf12 \strokec12 'bg-gray-700'\cf0 \strokec5 , \cf14 \strokec14 IconText\cf0 \strokec5 : \cf12 \strokec12 'B'\cf0 \strokec5 , \cf14 \strokec14 IconClass\cf0 \strokec5 : \cf12 \strokec12 'text-white text-6xl font-black'\cf0 \strokec5 , power: \cf12 \strokec12 'Batarang'\cf0 \strokec5 , universe: \cf12 \strokec12 'DC'\cf0 \strokec5  \},\cb1 \strokec5 \
\cb3 \strokec5             \{ name: \cf12 \strokec12 'Superman'\cf0 \strokec5 , color: \cf12 \strokec12 'bg-blue-600'\cf0 \strokec5 , \cf14 \strokec14 IconText\cf0 \strokec5 : \cf12 \strokec12 'S'\cf0 \strokec5 , \cf14 \strokec14 IconClass\cf0 \strokec5 : \cf12 \strokec12 'text-yellow-400 text-6xl font-black'\cf0 \strokec5 , power: \cf12 \strokec12 'Heat Vision'\cf0 \strokec5 , universe: \cf12 \strokec12 'DC'\cf0 \strokec5  \},\cb1 \strokec5 \
\cb3 \strokec5             \{ name: \cf12 \strokec12 'The Flash'\cf0 \strokec5 , color: \cf12 \strokec12 'bg-red-600'\cf0 \strokec5 , \cf14 \strokec14 IconText\cf0 \strokec5 : \cf12 \strokec12 'F'\cf0 \strokec5 , \cf14 \strokec14 IconClass\cf0 \strokec5 : \cf12 \strokec12 'text-yellow-300 text-6xl font-black'\cf0 \strokec5 , power: \cf12 \strokec12 'Speed Punch'\cf0 \strokec5 , universe: \cf12 \strokec12 'DC'\cf0 \strokec5  \},\cb1 \strokec5 \
\cb3 \strokec5             \{ name: \cf12 \strokec12 'Wonder Woman'\cf0 \strokec5 , color: \cf12 \strokec12 'bg-yellow-500'\cf0 \strokec5 , \cf14 \strokec14 IconText\cf0 \strokec5 : \cf12 \strokec12 'W'\cf0 \strokec5 , \cf14 \strokec14 IconClass\cf0 \strokec5 : \cf12 \strokec12 'text-red-700 text-6xl font-black'\cf0 \strokec5 , power: \cf12 \strokec12 'Lasso'\cf0 \strokec5 , universe: \cf12 \strokec12 'DC'\cf0 \strokec5  \},\cb1 \strokec5 \
\cb3 \strokec5             \{ name: \cf12 \strokec12 'Spider-Man'\cf0 \strokec5 , color: \cf12 \strokec12 'bg-red-700'\cf0 \strokec5 , \cf14 \strokec14 IconText\cf0 \strokec5 : \cf12 \strokec12 'S'\cf0 \strokec5 , \cf14 \strokec14 IconClass\cf0 \strokec5 : \cf12 \strokec12 'text-blue-500 text-6xl font-black'\cf0 \strokec5 , power: \cf12 \strokec12 'Web Shooter'\cf0 \strokec5 , universe: \cf12 \strokec12 'Marvel'\cf0 \strokec5  \},\cb1 \strokec5 \
\cb3 \strokec5             \{ name: \cf12 \strokec12 'Iron Man'\cf0 \strokec5 , color: \cf12 \strokec12 'bg-red-800'\cf0 \strokec5 , \cf14 \strokec14 IconText\cf0 \strokec5 : \cf12 \strokec12 'I'\cf0 \strokec5 , \cf14 \strokec14 IconClass\cf0 \strokec5 : \cf12 \strokec12 'text-yellow-400 text-6xl font-black'\cf0 \strokec5 , power: \cf12 \strokec12 'Repulsor Blast'\cf0 \strokec5 , universe: \cf12 \strokec12 'Marvel'\cf0 \strokec5  \},\cb1 \strokec5 \
\cb3 \strokec5         ];\cb1 \strokec5 \
\
\cb3 \strokec5         \cf10 \strokec10 const\cf0 \strokec5  villains = [\cb1 \strokec5 \
\cb3 \strokec5             \{ name: \cf12 \strokec12 'Green Goblin'\cf0 \strokec5 , emoji: \cf12 \strokec12 '\uc0\u55357 \u56442 '\cf0 \strokec5 , taunt: \cf12 \strokec12 'You\\'ll never catch me!'\cf0 \strokec5 , universe: \cf12 \strokec12 'Marvel'\cf0 \strokec5  \},\cb1 \strokec5 \
\cb3 \strokec5             \{ name: \cf12 \strokec12 'Joker'\cf0 \strokec5 , emoji: \cf12 \strokec12 '\uc0\u55356 \u56527 '\cf0 \strokec5 , taunt: \cf12 \strokec12 'Let\\'s put a smile on that face!'\cf0 \strokec5 , universe: \cf12 \strokec12 'DC'\cf0 \strokec5  \},\cb1 \strokec5 \
\cb3 \strokec5             \{ name: \cf12 \strokec12 'Venom'\cf0 \strokec5 , emoji: \cf12 \strokec12 '\uc0\u55357 \u56446 '\cf0 \strokec5 , taunt: \cf12 \strokec12 'We are Venom!'\cf0 \strokec5 , universe: \cf12 \strokec12 'Marvel'\cf0 \strokec5  \},\cb1 \strokec5 \
\cb3 \strokec5             \{ name: \cf12 \strokec12 'Penguin'\cf0 \strokec5 , emoji: \cf12 \strokec12 '\uc0\u55357 \u56359 '\cf0 \strokec5 , taunt: \cf12 \strokec12 'Wak wak wak!'\cf0 \strokec5 , universe: \cf12 \strokec12 'DC'\cf0 \strokec5  \},\cb1 \strokec5 \
\cb3 \strokec5             \{ name: \cf12 \strokec12 'Mysterio'\cf0 \strokec5 , emoji: \cf12 \strokec12 '\uc0\u55356 \u57261 '\cf0 \strokec5 , taunt: \cf12 \strokec12 'It\\'s all an illusion!'\cf0 \strokec5 , universe: \cf12 \strokec12 'Marvel'\cf0 \strokec5  \}\cb1 \strokec5 \
\cb3 \strokec5         ];\cb1 \strokec5 \
\
\cb3 \strokec5         \cf10 \strokec10 const\cf0 \strokec5  bossVillains = [\cb1 \strokec5 \
\cb3 \strokec5             \{ name: \cf12 \strokec12 'THANOS'\cf0 \strokec5 , emoji: \cf12 \strokec12 '\uc0\u55357 \u56394 '\cf0 \strokec5 , taunt: \cf12 \strokec12 'I am inevitable!'\cf0 \strokec5 , universe: \cf12 \strokec12 'Marvel'\cf0 \strokec5 , isBoss: \cf10 \strokec10 true\cf0 \strokec5  \},\cb1 \strokec5 \
\cb3 \strokec5             \{ name: \cf12 \strokec12 'DARKSEID'\cf0 \strokec5 , emoji: \cf12 \strokec12 '\uc0\u55357 \u56441 '\cf0 \strokec5 , taunt: \cf12 \strokec12 'Kneel before Darkseid!'\cf0 \strokec5 , universe: \cf12 \strokec12 'DC'\cf0 \strokec5 , isBoss: \cf10 \strokec10 true\cf0 \strokec5  \},\cb1 \strokec5 \
\cb3 \strokec5             \{ name: \cf12 \strokec12 'ULTRON'\cf0 \strokec5 , emoji: \cf12 \strokec12 '\uc0\u55358 \u56598 '\cf0 \strokec5 , taunt: \cf12 \strokec12 'There are no strings on me!'\cf0 \strokec5 , universe: \cf12 \strokec12 'Marvel'\cf0 \strokec5 , isBoss: \cf10 \strokec10 true\cf0 \strokec5  \}\cb1 \strokec5 \
\cb3 \strokec5         ];\cb1 \strokec5 \
\
\cb3 \strokec5         \cf9 \strokec9 // --- GAME STATE (Global Variables) ---\cf0 \cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 let\cf0 \strokec5  gameState = \cf12 \strokec12 'hero-select'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 let\cf0 \strokec5  selectedHero = \cf10 \strokec10 null\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 let\cf0 \strokec5  villain = \cf10 \strokec10 null\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 let\cf0 \strokec5  score = \cf15 \strokec15 0\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 let\cf0 \strokec5  villainHealth = \cf15 \strokec15 5\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 let\cf0 \strokec5  heroHealth = \cf15 \strokec15 3\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 let\cf0 \strokec5  currentQuestion = \cf10 \strokec10 null\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 let\cf0 \strokec5  combo = \cf15 \strokec15 0\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 let\cf0 \strokec5  powerUp = \cf10 \strokec10 null\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 let\cf0 \strokec5  isBoss = \cf10 \strokec10 false\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 let\cf0 \strokec5  level = \cf15 \strokec15 1\cf0 \strokec5 ;\cb1 \strokec5 \
\
\cb3 \strokec5         \cf10 \strokec10 const\cf0 \strokec5  rootElement = document.getElementById(\cf12 \strokec12 'game-root'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5         \cb1 \strokec5 \
\cb3 \strokec5         \cf9 \strokec9 // --- UTILITIES ---\cf0 \cb1 \strokec5 \
\
\cb3 \strokec5         \cf10 \strokec10 function\cf0 \strokec5  generateQuestion(currentLevel, isBossMode) \{\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 const\cf0 \strokec5  difficulty = isBossMode ? \cf12 \strokec12 'hard'\cf0 \strokec5  : currentLevel <= \cf15 \strokec15 1\cf0 \strokec5  ? \cf12 \strokec12 'easy'\cf0 \strokec5  : currentLevel <= \cf15 \strokec15 3\cf0 \strokec5  ? \cf12 \strokec12 'medium'\cf0 \strokec5  : \cf12 \strokec12 'hard'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             \cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 const\cf0 \strokec5  operations = [\cb1 \strokec5 \
\cb3 \strokec5                 \{ type: \cf12 \strokec12 'add'\cf0 \strokec5 , \cf10 \strokec10 symbol\cf0 \strokec5 : \cf12 \strokec12 '+'\cf0 \strokec5 , generate: (max) => \{\cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 const\cf0 \strokec5  num1 = \cf14 \strokec14 Math\cf0 \strokec5 .floor(\cf14 \strokec14 Math\cf0 \strokec5 .random() * max) + \cf15 \strokec15 5\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 const\cf0 \strokec5  num2 = \cf14 \strokec14 Math\cf0 \strokec5 .floor(\cf14 \strokec14 Math\cf0 \strokec5 .random() * max) + \cf15 \strokec15 5\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 return\cf0 \strokec5  \{ num1, num2, answer: num1 + num2 \};\cb1 \strokec5 \
\cb3 \strokec5                 \}\},\cb1 \strokec5 \
\cb3 \strokec5                 \{ type: \cf12 \strokec12 'subtract'\cf0 \strokec5 , \cf10 \strokec10 symbol\cf0 \strokec5 : \cf12 \strokec12 '-'\cf0 \strokec5 , generate: (max) => \{\cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 const\cf0 \strokec5  num1 = \cf14 \strokec14 Math\cf0 \strokec5 .floor(\cf14 \strokec14 Math\cf0 \strokec5 .random() * max) + \cf15 \strokec15 15\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 const\cf0 \strokec5  num2 = \cf14 \strokec14 Math\cf0 \strokec5 .floor(\cf14 \strokec14 Math\cf0 \strokec5 .random() * num1) + \cf15 \strokec15 1\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 return\cf0 \strokec5  \{ num1, num2, answer: num1 - num2 \};\cb1 \strokec5 \
\cb3 \strokec5                 \}\},\cb1 \strokec5 \
\cb3 \strokec5                 \{ type: \cf12 \strokec12 'multiply'\cf0 \strokec5 , \cf10 \strokec10 symbol\cf0 \strokec5 : \cf12 \strokec12 '\'d7'\cf0 \strokec5 , generate: (max) => \{\cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 const\cf0 \strokec5  num1 = \cf14 \strokec14 Math\cf0 \strokec5 .floor(\cf14 \strokec14 Math\cf0 \strokec5 .random() * \cf15 \strokec15 9\cf0 \strokec5 ) + \cf15 \strokec15 2\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 const\cf0 \strokec5  num2 = \cf14 \strokec14 Math\cf0 \strokec5 .floor(\cf14 \strokec14 Math\cf0 \strokec5 .random() * \cf15 \strokec15 9\cf0 \strokec5 ) + \cf15 \strokec15 2\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                     \cf9 \strokec9 // Introduce division sometimes in medium/hard mode\cf0 \cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 if\cf0 \strokec5  (difficulty !== \cf12 \strokec12 'easy'\cf0 \strokec5  && \cf14 \strokec14 Math\cf0 \strokec5 .random() > \cf15 \strokec15 0.7\cf0 \strokec5 ) \{ \cb1 \strokec5 \
\cb3 \strokec5                         \cf10 \strokec10 const\cf0 \strokec5  divisor = \cf14 \strokec14 Math\cf0 \strokec5 .floor(\cf14 \strokec14 Math\cf0 \strokec5 .random() * \cf15 \strokec15 9\cf0 \strokec5 ) + \cf15 \strokec15 2\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                         \cf10 \strokec10 const\cf0 \strokec5  quotient = \cf14 \strokec14 Math\cf0 \strokec5 .floor(\cf14 \strokec14 Math\cf0 \strokec5 .random() * \cf15 \strokec15 10\cf0 \strokec5 ) + \cf15 \strokec15 2\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                         \cf10 \strokec10 return\cf0 \strokec5  \{ num1: divisor * quotient, num2: divisor, \cf10 \strokec10 symbol\cf0 \strokec5 : \cf12 \strokec12 '\'f7'\cf0 \strokec5 , answer: quotient, type: \cf12 \strokec12 'divide'\cf0 \strokec5  \};\cb1 \strokec5 \
\cb3 \strokec5                     \}\cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 return\cf0 \strokec5  \{ num1, num2, answer: num1 * num2 \};\cb1 \strokec5 \
\cb3 \strokec5                 \}\}\cb1 \strokec5 \
\cb3 \strokec5             ];\cb1 \strokec5 \
\
\cb3 \strokec5             \cf9 \strokec9 // Determine max number range based on difficulty\cf0 \cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 let\cf0 \strokec5  maxRange = \cf15 \strokec15 10\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 if\cf0 \strokec5  (difficulty === \cf12 \strokec12 'medium'\cf0 \strokec5 ) maxRange = \cf15 \strokec15 12\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 if\cf0 \strokec5  (difficulty === \cf12 \strokec12 'hard'\cf0 \strokec5 ) maxRange = \cf15 \strokec15 15\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 if\cf0 \strokec5  (isBossMode) maxRange = \cf15 \strokec15 20\cf0 \strokec5 ;\cb1 \strokec5 \
\
\cb3 \strokec5             \cf10 \strokec10 const\cf0 \strokec5  op = operations[\cf14 \strokec14 Math\cf0 \strokec5 .floor(\cf14 \strokec14 Math\cf0 \strokec5 .random() * operations.length)];\cb1 \strokec5 \
\cb3 \strokec5             \cb1 \strokec5 \
\cb3 \strokec5             \cf9 \strokec9 // Generate using the max range relevant to the operation\cf0 \cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 return\cf0 \strokec5  \{ ...op.generate(maxRange), \cf10 \strokec10 symbol\cf0 \strokec5 : op.\cf10 \strokec10 symbol\cf0 \strokec5 , type: op.type \};\cb1 \strokec5 \
\cb3 \strokec5         \}\cb1 \strokec5 \
\cb3 \strokec5         \cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 function\cf0 \strokec5  updateUI() \{\cb1 \strokec5 \
\cb3 \strokec5             \cf9 \strokec9 // Guard clause to prevent rendering before root element is available\cf0 \cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 if\cf0 \strokec5  (!rootElement) \cf10 \strokec10 return\cf0 \strokec5 ;\cb1 \strokec5 \
\
\cb3 \strokec5             rootElement.innerHTML = renderContent();\cb1 \strokec5 \
\cb3 \strokec5             \cf9 \strokec9 // Re-attach event listeners after rendering (crucial for vanilla JS)\cf0 \cb1 \strokec5 \
\cb3 \strokec5             attachEventListeners();\cb1 \strokec5 \
\
\cb3 \strokec5             \cf9 \strokec9 // Focus the input field if we are in battle and ready for input\cf0 \cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 if\cf0 \strokec5  (gameState === \cf12 \strokec12 'battle'\cf0 \strokec5 ) \{\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 const\cf0 \strokec5  input = document.getElementById(\cf12 \strokec12 'answer-input'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 if\cf0 \strokec5  (input) \{\cb1 \strokec5 \
\cb3 \strokec5                     input.focus();\cb1 \strokec5 \
\cb3 \strokec5                 \}\cb1 \strokec5 \
\cb3 \strokec5             \}\cb1 \strokec5 \
\cb3 \strokec5         \}\cb1 \strokec5 \
\
\cb3 \strokec5         \cf10 \strokec10 function\cf0 \strokec5  attachEventListeners() \{\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 if\cf0 \strokec5  (gameState === \cf12 \strokec12 'hero-select'\cf0 \strokec5 ) \{\cb1 \strokec5 \
\cb3 \strokec5                 document.querySelectorAll(\cf12 \strokec12 '.hero-select-button'\cf0 \strokec5 ).forEach(button => \{\cb1 \strokec5 \
\cb3 \strokec5                     button.onclick = (e) => selectHero(e.currentTarget.dataset.heroName);\cb1 \strokec5 \
\cb3 \strokec5                 \});\cb1 \strokec5 \
\cb3 \strokec5             \} \cf10 \strokec10 else\cf0 \strokec5  \cf10 \strokec10 if\cf0 \strokec5  (gameState === \cf12 \strokec12 'battle'\cf0 \strokec5 ) \{\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 const\cf0 \strokec5  attackButton = document.getElementById(\cf12 \strokec12 'attack-button'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 if\cf0 \strokec5  (attackButton) attackButton.onclick = checkAnswer;\cb1 \strokec5 \
\cb3 \strokec5                 \cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 const\cf0 \strokec5  answerInput = document.getElementById(\cf12 \strokec12 'answer-input'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 if\cf0 \strokec5  (answerInput) \{\cb1 \strokec5 \
\cb3 \strokec5                     answerInput.onkeyup = (e) => \{\cb1 \strokec5 \
\cb3 \strokec5                         \cf10 \strokec10 if\cf0 \strokec5  (e.key === \cf12 \strokec12 'Enter'\cf0 \strokec5 ) checkAnswer();\cb1 \strokec5 \
\cb3 \strokec5                     \};\cb1 \strokec5 \
\cb3 \strokec5                 \}\cb1 \strokec5 \
\cb3 \strokec5             \} \cf10 \strokec10 else\cf0 \strokec5  \cf10 \strokec10 if\cf0 \strokec5  (gameState === \cf12 \strokec12 'level-complete'\cf0 \strokec5 ) \{\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 const\cf0 \strokec5  nextButton = document.getElementById(\cf12 \strokec12 'next-level-button'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 if\cf0 \strokec5  (nextButton) nextButton.onclick = () => startNewLevel(level + \cf15 \strokec15 1\cf0 \strokec5 , \cf10 \strokec10 false\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5                 \cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 const\cf0 \strokec5  bossButton = document.getElementById(\cf12 \strokec12 'boss-battle-button'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 if\cf0 \strokec5  (bossButton) bossButton.onclick = () => startNewLevel(level, \cf10 \strokec10 true\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5             \} \cf10 \strokec10 else\cf0 \strokec5  \cf10 \strokec10 if\cf0 \strokec5  (gameState === \cf12 \strokec12 'victory'\cf0 \strokec5  || gameState === \cf12 \strokec12 'game-over'\cf0 \strokec5 ) \{\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 const\cf0 \strokec5  newGameButton = document.getElementById(\cf12 \strokec12 'new-game-button'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 if\cf0 \strokec5  (newGameButton) newGameButton.onclick = () => \{ gameState = \cf12 \strokec12 'hero-select'\cf0 \strokec5 ; updateUI(); \};\cb1 \strokec5 \
\cb3 \strokec5                 \cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 const\cf0 \strokec5  tryAgainButton = document.getElementById(\cf12 \strokec12 'try-again-button'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 if\cf0 \strokec5  (tryAgainButton) tryAgainButton.onclick = () => startNewLevel(level, isBoss);\cb1 \strokec5 \
\cb3 \strokec5                 \cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 const\cf0 \strokec5  continueButton = document.getElementById(\cf12 \strokec12 'continue-button'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 if\cf0 \strokec5  (continueButton) continueButton.onclick = () => startNewLevel(level + \cf15 \strokec15 1\cf0 \strokec5 , \cf10 \strokec10 false\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5                 \cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 const\cf0 \strokec5  changeHeroButton = document.getElementById(\cf12 \strokec12 'change-hero-button'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 if\cf0 \strokec5  (changeHeroButton) changeHeroButton.onclick = () => \{ gameState = \cf12 \strokec12 'hero-select'\cf0 \strokec5 ; updateUI(); \};\cb1 \strokec5 \
\cb3 \strokec5             \}\cb1 \strokec5 \
\cb3 \strokec5         \}\cb1 \strokec5 \
\
\cb3 \strokec5         \cf9 \strokec9 // --- GAME LOGIC FUNCTIONS ---\cf0 \cb1 \strokec5 \
\
\cb3 \strokec5         \cf10 \strokec10 function\cf0 \strokec5  startNewLevel(newLevel, boss) \{\cb1 \strokec5 \
\cb3 \strokec5             level = newLevel;\cb1 \strokec5 \
\cb3 \strokec5             isBoss = boss;\cb1 \strokec5 \
\cb3 \strokec5             \cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 const\cf0 \strokec5  opponentVillains = boss ? bossVillains : villains;\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 const\cf0 \strokec5  fallbackVillains = boss ? bossVillains : villains;\cb1 \strokec5 \
\cb3 \strokec5             \cb1 \strokec5 \
\cb3 \strokec5             \cf9 \strokec9 // Select a villain from the opposite universe if possible\cf0 \cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 const\cf0 \strokec5  opponentOptions = opponentVillains.filter(v => v.universe !== selectedHero.universe);\cb1 \strokec5 \
\cb3 \strokec5             \cb1 \strokec5 \
\cb3 \strokec5             villain = opponentOptions.length > \cf15 \strokec15 0\cf0 \strokec5  \cb1 \strokec5 \
\cb3 \strokec5                 ? opponentOptions[\cf14 \strokec14 Math\cf0 \strokec5 .floor(\cf14 \strokec14 Math\cf0 \strokec5 .random() * opponentOptions.length)]\cb1 \strokec5 \
\cb3 \strokec5                 : fallbackVillains[\cf14 \strokec14 Math\cf0 \strokec5 .floor(\cf14 \strokec14 Math\cf0 \strokec5 .random() * fallbackVillains.length)];\cb1 \strokec5 \
\cb3 \strokec5             \cb1 \strokec5 \
\cb3 \strokec5             villainHealth = boss ? \cf15 \strokec15 10\cf0 \strokec5  : \cf15 \strokec15 5\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             heroHealth = \cf15 \strokec15 3\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             combo = \cf15 \strokec15 0\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             powerUp = \cf10 \strokec10 null\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             currentQuestion = generateQuestion(newLevel, boss);\cb1 \strokec5 \
\cb3 \strokec5             gameState = \cf12 \strokec12 'battle'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             \cb1 \strokec5 \
\cb3 \strokec5             updateUI();\cb1 \strokec5 \
\cb3 \strokec5         \}\cb1 \strokec5 \
\
\cb3 \strokec5         \cf10 \strokec10 function\cf0 \strokec5  selectHero(heroName) \{\cb1 \strokec5 \
\cb3 \strokec5             selectedHero = heroes.find(h => h.name === heroName);\cb1 \strokec5 \
\cb3 \strokec5             \cf9 \strokec9 // Start game immediately after selection\cf0 \cb1 \strokec5 \
\cb3 \strokec5             startNewLevel(\cf15 \strokec15 1\cf0 \strokec5 , \cf10 \strokec10 false\cf0 \strokec5 ); \cb1 \strokec5 \
\cb3 \strokec5         \}\cb1 \strokec5 \
\
\cb3 \strokec5         \cf10 \strokec10 function\cf0 \strokec5  triggerAnimation(animationType, callback) \{\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 const\cf0 \strokec5  animationOverlay = document.getElementById(\cf12 \strokec12 'animation-overlay'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 const\cf0 \strokec5  root = document.querySelector(\cf12 \strokec12 'body'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5             \cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 if\cf0 \strokec5  (animationOverlay) \{\cb1 \strokec5 \
\cb3 \strokec5                 \cf9 \strokec9 // Clear previous animation classes\cf0 \cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 const\cf0 \strokec5  animationText = animationOverlay.querySelector(\cf12 \strokec12 'div'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5                 \cb1 \strokec5 \
\cb3 \strokec5                 \cf9 \strokec9 // Set animation text properties\cf0 \cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 if\cf0 \strokec5  (animationType === \cf12 \strokec12 'COMBO!'\cf0 \strokec5 ) \{\cb1 \strokec5 \
\cb3 \strokec5                     animationText.className = \cf12 \strokec12 `text-7xl md:text-9xl font-black text-yellow-300 explode pulse-glow`\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                     animationText.textContent = \cf12 \strokec12 'COMBO!'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 \} \cf10 \strokec10 else\cf0 \strokec5  \cf10 \strokec10 if\cf0 \strokec5  (animationType === \cf12 \strokec12 'POW'\cf0 \strokec5 ) \{\cb1 \strokec5 \
\cb3 \strokec5                     animationText.className = \cf12 \strokec12 `text-7xl md:text-9xl font-black text-red-500 explode`\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                     animationText.textContent = \cf12 \strokec12 'POW!'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 \} \cf10 \strokec10 else\cf0 \strokec5  \cf10 \strokec10 if\cf0 \strokec5  (animationType === \cf12 \strokec12 'MISS'\cf0 \strokec5 ) \{\cb1 \strokec5 \
\cb3 \strokec5                     animationText.className = \cf12 \strokec12 `text-7xl md:text-9xl font-black text-gray-400 explode`\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                     animationText.textContent = \cf12 \strokec12 'MISS!'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 \}\cb1 \strokec5 \
\
\cb3 \strokec5                 \cf9 \strokec9 // Trigger shake if damage taken\cf0 \cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 if\cf0 \strokec5  (animationType === \cf12 \strokec12 'MISS'\cf0 \strokec5 ) \{\cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 if\cf0 \strokec5  (root) root.classList.add(\cf12 \strokec12 'shake'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5                 \}\cb1 \strokec5 \
\cb3 \strokec5             \}\cb1 \strokec5 \
\
\cb3 \strokec5             \cf9 \strokec9 // Wait for animation duration then proceed\cf0 \cb1 \strokec5 \
\cb3 \strokec5             setTimeout(() => \{\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 if\cf0 \strokec5  (animationOverlay) \{\cb1 \strokec5 \
\cb3 \strokec5                     animationOverlay.querySelector(\cf12 \strokec12 'div'\cf0 \strokec5 ).textContent = \cf12 \strokec12 ''\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                     animationOverlay.querySelector(\cf12 \strokec12 'div'\cf0 \strokec5 ).className = \cf12 \strokec12 ''\cf0 \strokec5 ; \cf9 \strokec9 // Clear classes\cf0 \cb1 \strokec5 \
\cb3 \strokec5                 \}\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 if\cf0 \strokec5  (root) root.classList.remove(\cf12 \strokec12 'shake'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5                 callback();\cb1 \strokec5 \
\cb3 \strokec5             \}, \cf15 \strokec15 800\cf0 \strokec5 ); \cf9 \strokec9 // Shorter duration for smoother gameplay\cf0 \cb1 \strokec5 \
\cb3 \strokec5         \}\cb1 \strokec5 \
\
\cb3 \strokec5         \cf10 \strokec10 function\cf0 \strokec5  checkAnswer() \{\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 const\cf0 \strokec5  input = document.getElementById(\cf12 \strokec12 'answer-input'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 const\cf0 \strokec5  feedbackBox = document.getElementById(\cf12 \strokec12 'feedback-box'\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5             \cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 if\cf0 \strokec5  (!input || !feedbackBox || input.value === \cf12 \strokec12 ''\cf0 \strokec5  || isNaN(parseInt(input.value, \cf15 \strokec15 10\cf0 \strokec5 ))) \{\cb1 \strokec5 \
\cb3 \strokec5                 \cf9 \strokec9 // If input is empty or invalid, just return without error\cf0 \cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 return\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             \}\cb1 \strokec5 \
\
\cb3 \strokec5             \cf10 \strokec10 const\cf0 \strokec5  submittedAnswer = parseInt(input.value, \cf15 \strokec15 10\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 const\cf0 \strokec5  correct = submittedAnswer === currentQuestion.answer;\cb1 \strokec5 \
\cb3 \strokec5             \cb1 \strokec5 \
\cb3 \strokec5             \cf9 \strokec9 // Disable input and button while feedback is showing\cf0 \cb1 \strokec5 \
\cb3 \strokec5             input.disabled = \cf10 \strokec10 true\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             document.getElementById(\cf12 \strokec12 'attack-button'\cf0 \strokec5 ).disabled = \cf10 \strokec10 true\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             \cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 let\cf0 \strokec5  animationText = \cf12 \strokec12 ''\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 let\cf0 \strokec5  finalVillainHealth = villainHealth;\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 let\cf0 \strokec5  finalHeroHealth = heroHealth;\cb1 \strokec5 \
\
\cb3 \strokec5             \cf10 \strokec10 if\cf0 \strokec5  (correct) \{\cb1 \strokec5 \
\cb3 \strokec5                 score++;\cb1 \strokec5 \
\cb3 \strokec5                 combo++;\cb1 \strokec5 \
\cb3 \strokec5                 animationText = combo > \cf15 \strokec15 1\cf0 \strokec5  ? \cf12 \strokec12 'COMBO!'\cf0 \strokec5  : \cf12 \strokec12 'POW'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 \cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 let\cf0 \strokec5  damage = \cf15 \strokec15 1\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 if\cf0 \strokec5  (combo >= \cf15 \strokec15 3\cf0 \strokec5 ) damage += \cf15 \strokec15 1\cf0 \strokec5 ; \cf9 \strokec9 // 3-hit combo grants bonus damage\cf0 \cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 let\cf0 \strokec5  finalDamage = damage;\cb1 \strokec5 \
\
\cb3 \strokec5                 \cf10 \strokec10 if\cf0 \strokec5  (powerUp === \cf12 \strokec12 'DOUBLE'\cf0 \strokec5 ) \{\cb1 \strokec5 \
\cb3 \strokec5                     finalDamage *= \cf15 \strokec15 2\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                     powerUp = \cf10 \strokec10 null\cf0 \strokec5 ; \cf9 \strokec9 // Power up consumed\cf0 \cb1 \strokec5 \
\cb3 \strokec5                 \}\cb1 \strokec5 \
\cb3 \strokec5                 finalVillainHealth = villainHealth - finalDamage;\cb1 \strokec5 \
\
\cb3 \strokec5                 feedbackBox.className = \cf12 \strokec12 'mt-4 md:mt-6 py-4 md:py-6 rounded-2xl text-2xl md:text-4xl font-black border-4 md:border-6 border-black shadow-xl bg-green-600 text-white slide-in'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 feedbackBox.innerHTML = \cf12 \strokec12 `\uc0\u9889  DIRECT HIT! -\cf0 \strokec5 $\{finalDamage\}\cf12 \strokec12  HP`\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 \cb1 \strokec5 \
\cb3 \strokec5             \} \cf10 \strokec10 else\cf0 \strokec5  \{\cb1 \strokec5 \
\cb3 \strokec5                 combo = \cf15 \strokec15 0\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 animationText = \cf12 \strokec12 'MISS'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 \cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 let\cf0 \strokec5  damageTaken = \cf15 \strokec15 1\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 let\cf0 \strokec5  damageText = \cf12 \strokec12 '-1 HP'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 \cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 if\cf0 \strokec5  (powerUp === \cf12 \strokec12 'SHIELD'\cf0 \strokec5 ) \{\cb1 \strokec5 \
\cb3 \strokec5                     damageTaken = \cf15 \strokec15 0\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                     powerUp = \cf10 \strokec10 null\cf0 \strokec5 ; \cf9 \strokec9 // Power up consumed\cf0 \cb1 \strokec5 \
\cb3 \strokec5                     damageText = \cf12 \strokec12 'SHIELD ACTIVATED!'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 \}\cb1 \strokec5 \
\cb3 \strokec5                 finalHeroHealth = heroHealth - damageTaken;\cb1 \strokec5 \
\
\cb3 \strokec5                 feedbackBox.className = \cf12 \strokec12 'mt-4 md:mt-6 py-4 md:py-6 rounded-2xl text-2xl md:text-4xl font-black border-4 md:border-6 border-black shadow-xl bg-gray-600 text-white slide-in'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 feedbackBox.innerHTML = \cf12 \strokec12 `\uc0\u10060  MISSED! \cf0 \strokec5 $\{damageText\}\cf12 \strokec12  (Answer: \cf0 \strokec5 $\{currentQuestion.answer\}\cf12 \strokec12 )`\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             \}\cb1 \strokec5 \
\
\cb3 \strokec5             \cf9 \strokec9 // Update state variables after calculations but before animation callback\cf0 \cb1 \strokec5 \
\cb3 \strokec5             villainHealth = finalVillainHealth;\cb1 \strokec5 \
\cb3 \strokec5             heroHealth = finalHeroHealth;\cb1 \strokec5 \
\cb3 \strokec5             \cb1 \strokec5 \
\cb3 \strokec5             triggerAnimation(animationText, () => \{\cb1 \strokec5 \
\cb3 \strokec5                 \cf9 \strokec9 // Check win/loss conditions\cf0 \cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 if\cf0 \strokec5  (villainHealth <= \cf15 \strokec15 0\cf0 \strokec5 ) \{\cb1 \strokec5 \
\cb3 \strokec5                     gameState = isBoss ? \cf12 \strokec12 'victory'\cf0 \strokec5  : \cf12 \strokec12 'level-complete'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 \} \cf10 \strokec10 else\cf0 \strokec5  \cf10 \strokec10 if\cf0 \strokec5  (heroHealth <= \cf15 \strokec15 0\cf0 \strokec5 ) \{\cb1 \strokec5 \
\cb3 \strokec5                     gameState = \cf12 \strokec12 'game-over'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 \} \cf10 \strokec10 else\cf0 \strokec5  \{\cb1 \strokec5 \
\cb3 \strokec5                     \cf9 \strokec9 // Continue battle\cf0 \cb1 \strokec5 \
\cb3 \strokec5                     currentQuestion = generateQuestion(level, isBoss);\cb1 \strokec5 \
\cb3 \strokec5                     \cf9 \strokec9 // 1 in 4 chance to find a power-up if one isn't active and not in boss mode\cf0 \cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 if\cf0 \strokec5  (!powerUp && \cf14 \strokec14 Math\cf0 \strokec5 .random() < \cf15 \strokec15 0.25\cf0 \strokec5  && !isBoss) \{\cb1 \strokec5 \
\cb3 \strokec5                         \cf10 \strokec10 const\cf0 \strokec5  powerUpsList = [\cf12 \strokec12 'DOUBLE'\cf0 \strokec5 , \cf12 \strokec12 'SHIELD'\cf0 \strokec5 ];\cb1 \strokec5 \
\cb3 \strokec5                         powerUp = powerUpsList[\cf14 \strokec14 Math\cf0 \strokec5 .floor(\cf14 \strokec14 Math\cf0 \strokec5 .random() * powerUpsList.length)];\cb1 \strokec5 \
\cb3 \strokec5                     \}\cb1 \strokec5 \
\cb3 \strokec5                 \}\cb1 \strokec5 \
\cb3 \strokec5                 \cb1 \strokec5 \
\cb3 \strokec5                 \cf9 \strokec9 // Clear input and re-enable for next round (or transition to next state)\cf0 \cb1 \strokec5 \
\cb3 \strokec5                 input.value = \cf12 \strokec12 ''\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 input.disabled = \cf10 \strokec10 false\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 document.getElementById(\cf12 \strokec12 'attack-button'\cf0 \strokec5 ).disabled = \cf10 \strokec10 false\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 \cb1 \strokec5 \
\cb3 \strokec5                 \cf9 \strokec9 // Remove feedback text class immediately to re-hide it before next action\cf0 \cb1 \strokec5 \
\cb3 \strokec5                 feedbackBox.className = \cf12 \strokec12 'mt-4 py-4 rounded-2xl text-2xl font-black text-white invisible'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5                 \cb1 \strokec5 \
\cb3 \strokec5                 updateUI(); \cf9 \strokec9 // Re-render the game state\cf0 \cb1 \strokec5 \
\cb3 \strokec5             \});\cb1 \strokec5 \
\cb3 \strokec5         \}\cb1 \strokec5 \
\
\cb3 \strokec5         \cf9 \strokec9 // --- RENDER HTML TEMPLATES ---\cf0 \cb1 \strokec5 \
\
\cb3 \strokec5         \cf10 \strokec10 function\cf0 \strokec5  renderHealthBar(current, max, color) \{\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 const\cf0 \strokec5  percentage = \cf14 \strokec14 Math\cf0 \strokec5 .max(\cf15 \strokec15 0\cf0 \strokec5 , (current / max) * \cf15 \strokec15 100\cf0 \strokec5 );\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 return\cf0 \strokec5  \cf12 \strokec12 `\cf0 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf12 \cb3 \strokec12                 <div class="h-4 md:h-6 w-full bg-gray-300 rounded-full overflow-hidden shadow-inner">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <div class="h-full \cf0 \strokec5 $\{color\}\cf12 \strokec12  transition-all duration-300 ease-out rounded-full" style="width: \cf0 \strokec5 $\{percentage\}\cf12 \strokec12 %;"></div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                 </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                 <div class="text-xs md:text-sm font-semibold mt-1 text-white">\cf0 \strokec5 $\{\cf14 \strokec14 Math\cf0 \strokec5 .max(\cf15 \strokec15 0\cf0 \strokec5 , current)\}\cf12 \strokec12  / \cf0 \strokec5 $\{max\}\cf12 \strokec12  HP</div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12             `\cf0 \strokec5 ;\cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf0 \cb3 \strokec5         \}\cb1 \strokec5 \
\cb3 \strokec5         \cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 function\cf0 \strokec5  renderHeroSelect() \{\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 return\cf0 \strokec5  \cf12 \strokec12 `\cf0 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf12 \cb3 \strokec12                 <div class="max-w-4xl mx-auto p-4 md:p-8 bg-white/10 backdrop-blur-sm rounded-3xl shadow-2xl text-center slide-in">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <h1 class="text-4xl md:text-5xl font-extrabold text-yellow-300 mb-6 border-b-4 border-yellow-500 pb-2">CHOOSE YOUR HERO</h1>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <p class="text-white mb-8 text-lg md:text-xl">Select a legendary hero to battle the forces of math crime across the multiverse!</p>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     \cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <div class="grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-8">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         \cf0 \strokec5 $\{heroes.map(hero => \cf12 \strokec12 `\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                             <button class="hero-select-button \cf0 \strokec5 $\{hero.color\}\cf12 \strokec12  p-4 md:p-6 rounded-xl hover:shadow-xl transition duration-200 transform hover:scale-105 border-4 border-white/50" data-hero-name="\cf0 \strokec5 $\{hero.name\}\cf12 \strokec12 ">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 <div class="w-20 h-20 mx-auto rounded-full bg-black flex items-center justify-center mb-3 shadow-lg">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                     <span class="\cf0 \strokec5 $\{hero.\cf14 \strokec14 IconClass\cf0 \strokec5 \}\cf12 \strokec12 ">\cf0 \strokec5 $\{hero.\cf14 \strokec14 IconText\cf0 \strokec5 \}\cf12 \strokec12 </span>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 <h2 class="text-xl md:text-2xl font-bold text-white">\cf0 \strokec5 $\{hero.name\}\cf12 \strokec12 </h2>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 <p class="text-sm md:text-base text-gray-300">\cf0 \strokec5 $\{hero.power\}\cf12 \strokec12 </p>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                             </button>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         `\cf0 \strokec5 ).join(\cf12 \strokec12 ''\cf0 \strokec5 )\}\cb1 \strokec5 \
\cf12 \cb3 \strokec12                     </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                 </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12             `\cf0 \strokec5 ;\cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf0 \cb3 \strokec5         \}\cb1 \strokec5 \
\
\cb3 \strokec5         \cf10 \strokec10 function\cf0 \strokec5  renderBattleScreen() \{\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 const\cf0 \strokec5  maxHeroHealth = \cf15 \strokec15 3\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 const\cf0 \strokec5  maxVillainHealth = isBoss ? \cf15 \strokec15 10\cf0 \strokec5  : \cf15 \strokec15 5\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 const\cf0 \strokec5  heroIconClass = selectedHero.\cf14 \strokec14 IconClass\cf0 \strokec5 .replace(\cf12 \strokec12 'text-6xl'\cf0 \strokec5 , \cf12 \strokec12 'text-4xl md:text-6xl'\cf0 \strokec5 );\cb1 \strokec5 \
\
\cb3 \strokec5             \cf9 \strokec9 // Determine difficulty label\cf0 \cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 let\cf0 \strokec5  difficultyText = \cf12 \strokec12 ''\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 if\cf0 \strokec5  (level === \cf15 \strokec15 1\cf0 \strokec5 ) difficultyText = \cf12 \strokec12 'EASY'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 else\cf0 \strokec5  \cf10 \strokec10 if\cf0 \strokec5  (level <= \cf15 \strokec15 3\cf0 \strokec5 ) difficultyText = \cf12 \strokec12 'MEDIUM'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 else\cf0 \strokec5  difficultyText = \cf12 \strokec12 'HARD'\cf0 \strokec5 ;\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 if\cf0 \strokec5  (isBoss) difficultyText = \cf12 \strokec12 'BOSS BATTLE!'\cf0 \strokec5 ;\cb1 \strokec5 \
\
\cb3 \strokec5             \cf10 \strokec10 return\cf0 \strokec5  \cf12 \strokec12 `\cf0 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf12 \cb3 \strokec12                 <div class="max-w-4xl mx-auto p-4 md:p-8 bg-white/10 backdrop-blur-sm rounded-3xl shadow-2xl text-white slide-in">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <div class="text-center mb-4">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         <h1 class="text-3xl md:text-4xl font-extrabold text-yellow-300">Level \cf0 \strokec5 $\{level\}\cf12 \strokec12  - \cf0 \strokec5 $\{difficultyText\}\cf12 \strokec12 </h1>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         <p class="text-xl text-gray-300">Score: \cf0 \strokec5 $\{score\}\cf12 \strokec12  | Combo: \cf0 \strokec5 $\{combo\}\cf12 \strokec12 </p>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     </div>\cf0 \cb1 \strokec5 \
\
\cf12 \cb3 \strokec12                     <!-- Character Stats -->\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <div class="flex justify-between items-start mb-6">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         \cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         <!-- Hero Card -->\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         <div class="w-1/2 p-2 md:p-4 bg-blue-800/50 rounded-xl shadow-lg mr-2 border-2 border-blue-400">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                             <div class="flex items-center">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 <div class="w-10 h-10 md:w-16 md:h-16 rounded-full bg-black flex items-center justify-center mr-3 float">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                     <span class="\cf0 \strokec5 $\{heroIconClass\}\cf12 \strokec12 ">\cf0 \strokec5 $\{selectedHero.\cf14 \strokec14 IconText\cf0 \strokec5 \}\cf12 \strokec12 </span>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 <div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                     <h2 class="text-xl md:text-2xl font-bold">\cf0 \strokec5 $\{selectedHero.name\}\cf12 \strokec12 </h2>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                     \cf0 \strokec5 $\{renderHealthBar(heroHealth, maxHeroHealth, \cf12 \strokec12 'bg-green-500'\cf0 \strokec5 )\}\cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                             </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                             <div class="mt-2 text-sm text-gray-300">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 \cf0 \strokec5 $\{powerUp ? \cf12 \strokec12 `<span class="inline-block bg-yellow-500 text-black px-2 py-1 rounded-full font-bold text-xs pulse-glow">POWER UP: \cf0 \strokec5 $\{powerUp\}\cf12 \strokec12 </span>`\cf0 \strokec5  : \cf12 \strokec12 ''\cf0 \strokec5 \}\cb1 \strokec5 \
\cf12 \cb3 \strokec12                             </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         </div>\cf0 \cb1 \strokec5 \
\
\cf12 \cb3 \strokec12                         <!-- Villain Card -->\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         <div class="w-1/2 p-2 md:p-4 bg-red-800/50 rounded-xl shadow-lg ml-2 border-2 border-red-400 text-right">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                             <div class="flex items-center justify-end">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 <div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                     <h2 class="text-xl md:text-2xl font-bold">\cf0 \strokec5 $\{villain.name\}\cf12 \strokec12 </h2>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                     \cf0 \strokec5 $\{renderHealthBar(villainHealth, maxVillainHealth, \cf12 \strokec12 'bg-red-500'\cf0 \strokec5 )\}\cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 <div class="w-10 h-10 md:w-16 md:h-16 text-4xl md:text-6xl flex items-center justify-center ml-3 float">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                     \cf0 \strokec5 $\{villain.emoji\}\cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                             </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     </div>\cf0 \cb1 \strokec5 \
\
\cf12 \cb3 \strokec12                     <!-- Battle Action Area -->\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <div class="bg-gray-800 p-6 md:p-8 rounded-2xl shadow-xl text-center">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         <p class="text-xl md:text-2xl italic text-gray-400 mb-4">"\cf0 \strokec5 $\{villain.taunt\}\cf12 \strokec12 "</p>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         \cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         <!-- Question Box -->\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         <div class="bg-yellow-400 text-black p-4 md:p-6 rounded-xl mb-6 shadow-2xl">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                             <p class="text-4xl md:text-6xl font-black">\cf0 \strokec5 $\{currentQuestion.num1\}\cf12 \strokec12  \cf0 \strokec5 $\{currentQuestion.\cf10 \strokec10 symbol\cf0 \strokec5 \}\cf12 \strokec12  \cf0 \strokec5 $\{currentQuestion.num2\}\cf12 \strokec12  = ?</p>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         </div>\cf0 \cb1 \strokec5 \
\
\cf12 \cb3 \strokec12                         <!-- Input and Attack -->\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         <div class="flex flex-col md:flex-row gap-4">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                             <input \cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 id="answer-input"\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 type="number" \cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 placeholder="Your answer" \cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 class="flex-grow p-3 md:p-4 text-2xl text-center rounded-xl bg-white text-gray-800 border-4 border-yellow-500 focus:outline-none focus:border-blue-500 transition duration-150"\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 inputmode="numeric"\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                             />\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                             <button \cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 id="attack-button"\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 class="px-6 py-3 md:py-4 bg-red-600 text-white text-xl font-bold rounded-xl shadow-lg transition duration-200 hover:bg-red-700 hover:shadow-xl transform active:scale-95 whitespace-nowrap"\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                             >\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                                 \cf0 \strokec5 $\{selectedHero.power\}\cf12 \strokec12  ATTACK!\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                             </button>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         \cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         <!-- Feedback Box -->\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         <!-- Set to invisible by default, will be revealed with correct/incorrect class -->\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         <div id="feedback-box" class="mt-4 py-4 rounded-2xl text-2xl font-black text-white invisible">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                 </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12             `\cf0 \strokec5 ;\cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf0 \cb3 \strokec5         \}\cb1 \strokec5 \
\
\cb3 \strokec5         \cf10 \strokec10 function\cf0 \strokec5  renderLevelComplete() \{\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 const\cf0 \strokec5  isMegaBoss = villain.isBoss;\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 return\cf0 \strokec5  \cf12 \strokec12 `\cf0 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf12 \cb3 \strokec12                 <div class="max-w-md mx-auto p-8 bg-green-700/80 backdrop-blur-sm rounded-3xl shadow-2xl text-center text-white slide-in">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <h1 class="text-5xl font-extrabold text-yellow-300 mb-4">VICTORY!</h1>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <p class="text-2xl mb-6">You defeated the \cf0 \strokec5 $\{villain.name\}\cf12 \strokec12 !</p>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <p class="text-xl mb-8">Current Score: \cf0 \strokec5 $\{score\}\cf12 \strokec12 </p>\cf0 \cb1 \strokec5 \
\
\cf12 \cb3 \strokec12                     \cf0 \strokec5 $\{isMegaBoss ? \cf12 \strokec12 `\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         <p class="text-3xl font-bold mb-8">You have conquered the BOSS BATTLE!</p>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         <button id="new-game-button" class="w-full mb-4 py-3 bg-yellow-500 text-black text-xl font-bold rounded-xl shadow-lg transition hover:bg-yellow-400">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                             START NEW GAME\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         </button>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         <button id="change-hero-button" class="w-full py-3 bg-gray-500 text-white text-xl font-bold rounded-xl shadow-lg transition hover:bg-gray-600">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                             CHOOSE NEW HERO\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         </button>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     `\cf0 \strokec5  : \cf12 \strokec12 `\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         <button id="next-level-button" class="w-full mb-4 py-3 bg-blue-600 text-white text-xl font-bold rounded-xl shadow-lg transition hover:bg-blue-700">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                             PROCEED TO LEVEL \cf0 \strokec5 $\{level + \cf15 \strokec15 1\cf0 \strokec5 \}\cb1 \strokec5 \
\cf12 \cb3 \strokec12                         </button>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         <button id="boss-battle-button" class="w-full py-3 bg-red-600 text-white text-xl font-bold rounded-xl shadow-lg transition hover:bg-red-700 pulse-glow">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                             CHALLENGE A BOSS NOW!\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         </button>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     `\cf0 \strokec5 \}\cb1 \strokec5 \
\cf12 \cb3 \strokec12                 </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12             `\cf0 \strokec5 ;\cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf0 \cb3 \strokec5         \}\cb1 \strokec5 \
\
\cb3 \strokec5         \cf10 \strokec10 function\cf0 \strokec5  renderGameOver() \{\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 return\cf0 \strokec5  \cf12 \strokec12 `\cf0 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf12 \cb3 \strokec12                 <div class="max-w-md mx-auto p-8 bg-red-800/80 backdrop-blur-sm rounded-3xl shadow-2xl text-center text-white slide-in">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <h1 class="text-5xl font-extrabold text-yellow-300 mb-4">GAME OVER</h1>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <p class="text-2xl mb-6">The \cf0 \strokec5 $\{villain.name\}\cf12 \strokec12  overpowered you.</p>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <p class="text-xl mb-8">Final Score: \cf0 \strokec5 $\{score\}\cf12 \strokec12 </p>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     \cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <button id="try-again-button" class="w-full mb-4 py-3 bg-blue-600 text-white text-xl font-bold rounded-xl shadow-lg transition hover:bg-blue-700">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         RETRY LEVEL \cf0 \strokec5 $\{level\}\cb1 \strokec5 \
\cf12 \cb3 \strokec12                     </button>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <button id="new-game-button" class="w-full py-3 bg-gray-500 text-white text-xl font-bold rounded-xl shadow-lg transition hover:bg-gray-600">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         START NEW GAME\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     </button>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                 </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12             `\cf0 \strokec5 ;\cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf0 \cb3 \strokec5         \}\cb1 \strokec5 \
\cb3 \strokec5         \cb1 \strokec5 \
\cb3 \strokec5         \cf10 \strokec10 function\cf0 \strokec5  renderVictoryScreen() \{\cb1 \strokec5 \
\cb3 \strokec5              \cf10 \strokec10 return\cf0 \strokec5  \cf12 \strokec12 `\cf0 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf12 \cb3 \strokec12                 <div class="max-w-md mx-auto p-8 bg-purple-800/80 backdrop-blur-sm rounded-3xl shadow-2xl text-center text-white slide-in">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <h1 class="text-5xl font-extrabold text-yellow-300 mb-4">EPIC VICTORY!</h1>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <p class="text-2xl mb-6">You have defeated the mighty \cf0 \strokec5 $\{villain.name\}\cf12 \strokec12  and saved the day!</p>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <p class="text-xl mb-8">Final Score: \cf0 \strokec5 $\{score\}\cf12 \strokec12 </p>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     \cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <button id="continue-button" class="w-full mb-4 py-3 bg-green-600 text-white text-xl font-bold rounded-xl shadow-lg transition hover:bg-green-700">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         CONTINUE ADVENTURE (Level \cf0 \strokec5 $\{level + \cf15 \strokec15 1\cf0 \strokec5 \}\cf12 \strokec12 )\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     </button>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     <button id="change-hero-button" class="w-full py-3 bg-gray-500 text-white text-xl font-bold rounded-xl shadow-lg transition hover:bg-gray-600">\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                         CHOOSE NEW HERO\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                     </button>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12                 </div>\cf0 \cb1 \strokec5 \
\cf12 \cb3 \strokec12             `\cf0 \strokec5 ;\cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf0 \cb3 \strokec5         \}\cb1 \strokec5 \
\
\cb3 \strokec5         \cf10 \strokec10 function\cf0 \strokec5  renderContent() \{\cb1 \strokec5 \
\cb3 \strokec5             \cf10 \strokec10 switch\cf0 \strokec5  (gameState) \{\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 case\cf0 \strokec5  \cf12 \strokec12 'hero-select'\cf0 \strokec5 :\cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 return\cf0 \strokec5  renderHeroSelect();\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 case\cf0 \strokec5  \cf12 \strokec12 'battle'\cf0 \strokec5 :\cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 return\cf0 \strokec5  renderBattleScreen();\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 case\cf0 \strokec5  \cf12 \strokec12 'level-complete'\cf0 \strokec5 :\cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 return\cf0 \strokec5  renderLevelComplete();\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 case\cf0 \strokec5  \cf12 \strokec12 'game-over'\cf0 \strokec5 :\cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 return\cf0 \strokec5  renderGameOver();\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 case\cf0 \strokec5  \cf12 \strokec12 'victory'\cf0 \strokec5 :\cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 return\cf0 \strokec5  renderVictoryScreen();\cb1 \strokec5 \
\cb3 \strokec5                 \cf10 \strokec10 default\cf0 \strokec5 :\cb1 \strokec5 \
\cb3 \strokec5                     \cf10 \strokec10 return\cf0 \strokec5  renderHeroSelect();\cb1 \strokec5 \
\cb3 \strokec5             \}\cb1 \strokec5 \
\cb3 \strokec5         \}\cb1 \strokec5 \
\
\cb3 \strokec5         \cf9 \strokec9 // --- INITIALIZATION ---\cf0 \cb1 \strokec5 \
\cb3 \strokec5         \cf9 \strokec9 // Use DOMContentLoaded to ensure the script runs only after the HTML structure is loaded.\cf0 \cb1 \strokec5 \
\cb3 \strokec5         document.addEventListener(\cf12 \strokec12 'DOMContentLoaded'\cf0 \strokec5 , updateUI);\cb1 \strokec5 \
\
\cb3 \strokec5     \cf6 \strokec6 </\cf7 \strokec7 script\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 </\cf7 \strokec7 body\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
\cf6 \cb3 \strokec6 </\cf7 \strokec7 html\cf6 \strokec6 >\cf0 \cb1 \strokec5 \
}